
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.61.0/HERE_NOTICE
 */

H.util.eval("R.prototype.Yn=da(3,function(a){var b=this.getCache(),c=this;if(a!==x){B(a,kk,R.prototype.Yn,0);var d=a}else d=Jk;d!==b&&b.ia(function(e,f,g){return c.cc(e)?(d.add(e,f,g),!0):!1});this.jt=d});Xg.prototype.Yb=da(2,function(a){this.ts=a;a=this.getState();a!==Ag.INIT&&a!==Ag.LOADING&&dh(this)});function go(a){a=a.Vd(\"_#-;,:\",\"_#-;,:\",\"_#-;,:\");return new RegExp(\"^\"+a.replace(/[.*+?^${}()|[\\]\\\\\\/]/g,\"\\\\$&\").replace(/_#-;,:/g,\"\\\\d+\")+\"$\")}function ho(a,b){Wa.apply(null,arguments);return a}\nfunction io(a,b){var c=globalThis.console;c&&c.warn&&(a=hb(a)+\" is deprecated and will be removed soon. \",b&&(a+=b),c.warn(a))}var jo={};function ko(){}ko.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||document.createElement(\"canvas\")};ko.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var lo=new ko;t(\"H.service.util.eval\",function(a){return eval(a)});function mo(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.i().clone().A(b+\"/\"+a.fb+\"/\"+c).u(f),l=a.bd;this.$=a;this.sx=k;Tk.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(n,p,q){var r=h.sx.clone();l&&r.la(l[(q+p+n)%l.length]);r.A(q+\"/\"+n+\"/\"+p+\"/\"+d+\"/\"+e);return r.toString()},crossOrigin:g.crossOrigin,headers:g.headers,uri:k.toString().replace(/_/g,\"\")+d,engineType:g.engineType});this.wD=b;this.oi=c;this.Ga=f;this.Xo=c.split(\".\")[0];this.Ce=z(this.Ce,this);this.getCopyrights=\nthis.U;this.Ye=!1;a.addEventListener(\"versionupdate\",this.Ce)}u(mo,Tk);mo.prototype.MAX_STORE_TIME=2592E6;mo.prototype.o=function(a,b,c,d,e,f){this.Ye||(io(no,\"Use HERE Vector Tile API or Raster Tile API v3 instead.\"),this.Ye=!0);return mo.g.o.call(this,a,b,c,d,e,f)};mo.prototype.requestInternal=mo.prototype.o;mo.prototype.disposeInternal=function(){Tk.prototype.disposeInternal.call(this);this.$.removeEventListener(\"versionupdate\",this.Ce)};\nmo.prototype.U=function(a,b){return this.$.U().query(this.Xo,b,a)};mo.prototype.getCopyrights=mo.prototype.U;mo.prototype.Ce=function(){var a=this.$;this.sx=a.i().clone().A(this.wD+\"/\"+a.fb+\"/\"+this.oi).u(this.Ga);this.reload(!1)};mo.prototype.Vi=function(){return pm()};mo.prototype.td=function(){return pm()?om():mo.g.td.call(this)};function oo(a,b){b=void 0===b?{}:b;if(!a.Hm)throw new Bb(a);oo.g.constructor.call(this);var c=po(this,b);if(!c.baseUrl&&!c.platformBaseUrl)throw new C(a,0,'either \"baseUrl\" or \"platformBaseUrl\" must be specified');this.yc=(c.baseUrl?c.baseUrl:c.platformBaseUrl).clone();a=c.baseUrl?b:c;a.host&&this.yc.Qk(a.host);a.subDomain&&this.yc.la(a.subDomain);a.path&&this.yc.wc(a.path);qo(this.yc);this.pc=c.headers||{}}u(oo,I);t(\"H.service.Service\",oo);function po(a,b){a=a.Da();return b?ho({},a,b):a}\noo.prototype.Da=function(){return{}};oo.prototype.i=function(){return this.yc};oo.prototype.getUrl=oo.prototype.i;oo.prototype.o=function(a,b,c,d){d=new qg(void 0===d?\"application/json\":d,a.toString(),De,{headers:this.pc});d.then(b,ro(this,a,c));return d};function ro(a,b,c){return function(d){return\"function\"!==typeof d.json?Promise.reject(c(so(b,d))):d.json().then(function(e){return c(a.Jc(e))},function(){return c(so(b,d))})}}oo.prototype.Jc=function(a){return Error(a.message)};\nfunction so(a,b){return Error((b.statusText?\"[\"+b.statusText+\"] \":\"\")+a+\" request failed\")};function to(){this.qs={}}function uo(a,b){for(var c in b)b.hasOwnProperty(c)&&a.Bo(c,b[c])}to.prototype.Bo=function(a,b){a=this.qs[a]||(this.qs[a]=[]);var c,d=b.length;for(c=0;c<d;c++){var e=new jo.Rs(b[c]);a.push(e)}};to.prototype.query=function(a,b,c){a=this.qs[a];var d,e=a?a.length:0,f=[];for(d=0;d<e;d++)a[d].Wf(b,c)&&f.push(a[d]);return f};\njo.Rs=function(a){var b,c=a.boxes;this.alt=a.alt;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.Gn=[];if(c&&(b=c.length)){var d=c[0];var e=new E(d[0],d[1],d[2],d[3]);this.Gn.push(e);this.rn=new E(d[0],d[1],d[2],d[3]);for(a=1;a<b;a++)d=c[a],e=new E(d[0],d[1],d[2],d[3]),this.Gn.push(e),this.rn.zd(e,!1,this.rn)}};jo.Rs.prototype.Wf=function(a,b){if(a>=this.min&&a<=this.max)if((a=this.Gn.length)&&this.rn){if(this.rn.Wf(b))for(;a--;)if(this.Gn[a].Wf(b))return!0}else return!0;return!1};function W(a,b,c,d,e,f){if(a&&b)this.$r(a),this.Qk(b),this.wc(c),this.Wr(e),this.Pw(f),this.Tk(d);else throw new C(W,A,'Parameters \"scheme\" and \"host\" must be specified');}t(\"H.service.Url\",W);\nfunction vo(a,b){var c=globalThis.document,d;var e=\"\";if(c){e=c.createElement(\"a\");if(b){var f=(d=c.getElementsByTagName(\"base\")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement(\"base\"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split(\"@\")[1]);f=W;h=h&&0<h.length?\nh.substr(1):\"\";e={};var k,l;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;l=k.exec(c);)e[decodeURIComponent(l[2])]=l[4]?decodeURIComponent(l[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):\"\")}W.parse=vo;W.prototype.clone=function(){var a={},b;for(b in this.Ga)a[b]=this.Ga[b];return new W(this.oi,this.Qj,this.jf,a,this.uk,this.Db)};W.prototype.clone=W.prototype.clone;\nW.prototype.$r=function(a){if(!a||\"string\"!==typeof a)throw new C(this.$r,0,'The \"scheme\" parameter must be a non-empty string.');this.oi=a;return this};W.prototype.setScheme=W.prototype.$r;W.prototype.DA=function(){return this.oi};W.prototype.getScheme=W.prototype.DA;W.prototype.Qk=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw new C(this.Qk,0,'The \"host\" parameter is not a valid host name.');this.Qj=a;return this};\nW.prototype.setHost=W.prototype.Qk;W.prototype.Wz=function(){return this.Qj};W.prototype.getHost=W.prototype.Wz;W.prototype.wc=function(a){this.jf=a||void 0;return this};W.prototype.setPath=W.prototype.wc;W.prototype.pA=function(){return this.jf};W.prototype.getPath=W.prototype.pA;W.prototype.Tk=function(a){if(a)if(\"object\"==typeof a)this.Ga=a;else throw new C(this.Tk,0,'Parameter \"params\" must be an object.');else this.Ga={};return this};W.prototype.setQuery=W.prototype.Tk;W.prototype.Du=function(){return!wo(this)};\nW.prototype.hasQuery=W.prototype.Du;W.prototype.getQuery=function(){return this.Ga};W.prototype.getQuery=W.prototype.getQuery;W.prototype.Wr=function(a){if(void 0===a)this.uk=a;else{var b=gc(+a<<0,0,65535);if(b!=a)throw new C(this.Wr,0,'Parameter \"port\" must be an integer in range [0...65535]');this.uk=b}return this};W.prototype.setPort=W.prototype.Wr;W.prototype.uA=function(){return this.uk};W.prototype.getPort=W.prototype.uA;W.prototype.Pw=function(a){this.Db=a||void 0;return this};\nW.prototype.setAnchor=W.prototype.Pw;W.prototype.yp=function(){return this.Db};W.prototype.getAnchor=W.prototype.yp;W.prototype.u=function(a){if(\"object\"!==typeof a)throw new C(this.u,0,'Parameter \"other\" must be an object.');var b=this.Ga,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};W.prototype.mergeQuery=W.prototype.u;\nW.prototype.la=function(a){if(!a||\"string\"!==typeof a)throw new C(this.la,0,'Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Qk(a+\".\"+this.Qj)};W.prototype.addSubDomain=W.prototype.la;W.prototype.A=function(a){if(!a||\"string\"!==typeof a)throw new C(this.A,0,'Parameter \"subPath\" must be a non-empty string');return this.wc((this.jf?this.jf+\"/\":\"\")+a)};W.prototype.addSubPath=W.prototype.A;\nW.prototype.toString=function(){return[this.oi+\"://\",this.Qj,this.uk?\":\"+this.uk:\"\",this.jf||!wo(this)||this.Db?\"/\":\"\",this.jf?encodeURI(this.jf):\"\",xo(this),this.Db?\"#\"+encodeURIComponent(this.Db):\"\"].join(\"\")};W.prototype.toString=W.prototype.toString;function yo(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(b){return\"%\"+b.charCodeAt(0).toString(16)})}\nfunction xo(a){var b=[],c=a.Ga,d={},e;for(e in c){if(c.hasOwnProperty(e)&&\"function\"!==typeof c[e]){var f=a.Ga[e];d.Og=yo(e);B(f,zo)?f.jo.forEach(function(g){return function(h){b.push(g.Og+\"=\"+yo(h))}}(d)):B(f,Ao)?b.push(d.Og+\"=\"+f.jo.map(function(g){return yo(g)}).join(f.Sy)):b.push(void 0===f?d.Og:d.Og+\"=\"+yo(f))}d={Og:d.Og}}return 0<b.length?\"?\"+b.join(\"&\"):\"\"}\nfunction qo(a){var b=Wh(\"H-service\",\"1.61.0\",\"3b08619\",{region:\"row\"});a.Ga.xnlp=\"CL_JSMv3.\"+b.version;return a}function wo(a){var b,c=0;for(b in a.Ga)if(a.Ga.hasOwnProperty(b)&&\"function\"!==typeof a.Ga[b]&&(c++,0<c))break;return!c}function Bo(a,b){if(kb(a))for(var c=0;c<a.length;c++){var d=a[c];if(!lb(d)&&!ob(d)){var e=\"The Array does not contain only strings and numbers\";break}}else e=\"Not an Array\";if(e)throw new C(b,0,a);return a}\nfunction zo(a){this.jo=Bo(a,zo)}W.MultiValueQueryParameter=zo;zo.prototype.OA=function(){return this.jo};zo.prototype.getValues=zo.prototype.OA;function Ao(a,b){this.jo=Bo(a,Ao);if(!/^[!\\$\\(\\)\\*\\+,;]$/.test(b))throw new C(Ao,1,'Invalid delimiter \"'+b+'\"');this.Sy=b}W.DelimitedQuerySubValues=Ao;function Co(a,b){B(a,Do,Co,0);var c={};Object.assign(c,b);c.min=c.min||0;c.max=c.max||20;c.tileSize=c.tileSize||512;c.getURL=function(d,e,f){return a.Sf(d,e,f).clone().u({size:c.tileSize})};Tk.call(this,c);this.$=a}u(Co,Tk);t(\"H.service.rasterTile.Provider\",Co);Co.prototype.U=function(a,b){var c=this.$;return c.U().query(c.Ci.Rn+\".\"+c.K(),b,a)};Co.prototype.getCopyrights=Co.prototype.U;Co.prototype.Vi=function(){return pm()};Co.prototype.td=function(){return pm()?om():Co.g.td.call(this)};function X(a){a=ho({},this.Qy,a);var b=a.apikey||a.apiKey,c=a.baseUrl;if(c=b?c?0:\"baseUrl\":\"apikey\")throw new C(X,0,'\"'+c+'\" must be specified');this.Sw(a.baseUrl);this.ct=b;this.md.u({apikey:b});this.pc=a.headers||{};this.YC=Ta(a.servicesConfig||{})}t(\"H.service.Platform\",X);X.prototype.Qy={apikey:null,baseUrl:new W(\"https\",\"hereapi.com\")};X.prototype.Sw=function(a){this.md=qo(a.clone());this.ct=a=this.ct;this.md.u({apikey:a})};X.prototype.setBaseUrl=X.prototype.Sw;X.prototype.Lc=function(){return this.md};\nX.prototype.getBaseUrl=X.prototype.Lc;X.prototype.Ja=function(a,b){try{return a.Hm=!0,new a(ho({platformBaseUrl:this.Lc(),headers:this.pc},this.YC[a.CONFIG_KEY]||{},b||{}))}finally{a.Hm=!1}};X.prototype.createService=X.prototype.Ja;\nX.prototype.Yl=function(a,b,c){var d=this;if(!H.map.render.harp)throw Error(\"HARP engine module not found\");if(!ya(a)&&!lb(a))throw new C(this.Yl,0,\"is invalid: must be either a configuration object or a URL\");if(!db(b))throw new C(this.Yl,1,\"is invalid: must be a Function\");if(!db(c))throw new C(this.Yl,2,\"is invalid: must be a Function\");var e=new H.map.render.harp.Style(a);e.addEventListener(\"change\",function(){var f=e.getState();if(-1===f)c(Error(\"H.service.platform#createHybridLayers method failed to load style configuration\"));\nelse if(2===f){f={dark:!0};var g=d.Qp({resource:\"background\",queryParams:{style:\"satellite.day\"}}),h=e.Sd(),k={styles:[{technique:\"raster\",attr:{gamma:1,brightness:1}}]};h.definitions&&(void 0!==h.definitions[\"Satellite.Texture.Gamma\"]&&(k.styles[0].attr.gamma=h.definitions[\"Satellite.Texture.Gamma\"]),void 0!==h.definitions[\"Satellite.Texture.Brightness\"]&&(k.styles[0].attr.brightness=h.definitions[\"Satellite.Texture.Brightness\"]));g=new Co(g,{engineType:Nm,style:new H.map.render.harp.Style(k)});\nb({raster:new sl(g,f),vector:d.Lj().od(e,{engineType:Nm},f),traffic:d.Tp().od(e,{engineType:Nm},f)})}});e.load()};X.prototype.createHybridLayers=X.prototype.Yl;function no(a){no.g.constructor.call(this,no,a);a=po(this,a);this.bd=a.shards;(this.Ra=a.ignoreTypes?null:a.type)&&this.i().la(this.Ra);this.fb=a.version;this.ec=new to;this.pr={};this.Wl=0;\"newest\"===this.fb&&this.rp()}u(no,oo);t(\"H.service.MapTileService\",no);no.prototype.Da=function(){return{subDomain:\"maps.ls\",path:\"maptile/2.1\",type:\"base\",version:\"newest\",shards:[\"1\",\"2\",\"3\",\"4\"]}};no.CONFIG_KEY=\"maptile\";\nfunction Eo(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}no.prototype.vu=function(){return this.Ra};no.prototype.getType=no.prototype.vu;no.prototype.Wp=function(){return this.fb};no.prototype.getVersion=no.prototype.Wp;no.prototype.cs=function(a){this.fb=a};no.prototype.U=function(){this.Wl||(this.fb&&\"newest\"!==this.fb||\"traffic\"===this.Ra)&&this.Kf();return this.ec};no.prototype.getCopyrights=no.prototype.U;m=no.prototype;\nm.ss=function(a){a=a.response;var b;Eo(a,\"map\");Eo(a,\"scheme\");Eo(a,\"tiletype\");Eo(a,\"format\");Eo(a,\"resolution\");Eo(a,\"language\");if(\"newest\"===this.fb&&\"traffic\"!==this.Ra)for(b in a.maps)a.maps[b].hash&&a.maps[b].newest&&(this.cs(a.maps[b].hash),this.dispatchEvent(\"versionupdate\"));this.fq=a;this.dispatchEvent(\"infoupdate\")};m.pl=function(a){uo(this.ec,a);this.dispatchEvent(\"copyrightupdate\")};\nm.rp=function(){var a=this;var b=this.i().clone().A(\"info\").u({output:\"json\"});this.bd&&b.la(this.bd[0]);this.o(b,function(c){a.ss(c)},function(c){throw c;})};m.Kf=function(){var a=this;var b=this.i().clone().A(\"copyright\").A(a.fb).u({output:\"json\"});this.bd&&b.la(this.bd[0]);this.Wl=1;this.o(b,function(c){a.Wl=2;a.pl(c)},function(c){a.Wl=-1;throw c;})};m.Kj=function(){return this.fq};no.prototype.getInfo=no.prototype.Kj;\nno.prototype.nj=function(a,b,c,d,e,f){var g=this.i().clone().A(a+\"/\"+this.fb+\"/\"+b+\"/\"+c+\"/\"+d).u(e?e:{}).toString();var h=0,k,l=g.length;if(0!==l)for(k=0;k<l;k++){var n=g.charCodeAt(k);h=(h<<5)-h+n;h|=0}g=h;h=this.pr[g];h||(h=new mo(this,a,b,c,d,e,ho({headers:this.pc},f||{})),this.pr[g]=h);return h};no.prototype.createTileProvider=no.prototype.nj;no.prototype.Pd=function(a,b,c,d,e,f,g,h){a=this.nj(a,b,c,d,e,h);return new sl(a,{opacity:f,dark:!!g})};no.prototype.createTileLayer=no.prototype.Pd;\nX.prototype.Kp=function(a){return this.Ja(no,a)};X.prototype.getMapTileService=X.prototype.Kp;function Fo(a){this.ns=!!a.toBypassToken;if(!this.ns&&!a.token)throw new C(Fo,0,'\"token\" must be specified');io(Fo,\"Use HERE IML service instead.\");Fo.g.constructor.call(this,Fo,a);this.zx=a.token;this.st={};this.Vl={}}u(Fo,oo);t(\"H.service.xyz.Service\",Fo);Fo.prototype.Da=function(){return{host:\"xyz.api.here.com\",path:\"hub/spaces\"}};Fo.prototype.Jc=function(a){return Error(a.errorMessage||a.message)};\nFo.prototype.Np=function(a,b,c){ib(a,\"String\",this.Np,0,'\"projectId\" must be a string');Go(this.Np,1,b,c);a=Ho(this.i().clone().wc(\"project-api/projects/\"+a));return this.o(a,b,c)};Fo.prototype.getProject=Fo.prototype.Np;Fo.prototype.tu=function(a,b,c){Go(this.tu,0,a,b);c=Io(this,this.i().clone().u(c||{}));return this.o(c,a,b)};Fo.prototype.getSpaces=Fo.prototype.tu;\nFo.prototype.qm=function(a,b,c){ib(a,\"String\",this.qm,0,'\"spaceId\" must be a string');Go(this.qm,1,b,c);a=Io(this,this.i().clone().A(a));return this.o(a,b,c)};Fo.prototype.getSpace=Fo.prototype.qm;Fo.prototype.Dh=function(a,b,c){ib(a,\"String\",this.Dh,0,'\"spaceId\" must be a string');Go(this.Dh,1,b,c);a=Io(this,this.i().clone().A(a+\"/statistics\"));return this.o(a,b,c)};Fo.prototype.getStatistics=Fo.prototype.Dh;\nFo.prototype.lm=function(a,b,c,d,e,f,g){a=Io(this,this.i().clone().A(d+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+\".mvtf\").u(Object.assign({clip:!0},g)));return this.o(a,function(h){return h.arrayBuffer().then(e)},f,\"arraybuffer\")};Fo.prototype.search=function(a,b,c,d){ib(a,\"String\",this.search,0,'\"spaceId\" must be a string');Go(this.search,1,b,c);a=Io(this,this.i().clone().A(a+\"/search\").u(d||{}));return this.o(a,b,c)};Fo.prototype.search=Fo.prototype.search;\nFo.prototype.Ue=function(a,b,c,d){ib(a,\"String\",this.Ue,0,'\"spaceId\" must be a string');if(!ya(b))throw new C(this.Ue,1,'\"params\" must be an object');Go(this.Ue,2,c,d);a=Io(this,this.i().clone().A(a+\"/features\").u(b));return this.o(a,c,d)};Fo.prototype.getFeaturesById=Fo.prototype.Ue;\nFo.prototype.wh=function(a,b,c,d){ib(a,\"String\",this.wh,0,'\"spaceId\" must be a string');if(!ya(b))throw new C(this.Ue,1,'\"params\" must be an object');Go(this.wh,2,c,d);a=Io(this,this.i().clone().A(a+\"/bbox\").u(b));return this.o(a,c,d)};Fo.prototype.getFeaturesByBoundingBox=Fo.prototype.wh;Fo.prototype.U=function(a){var b=this.st[a];if(b)return b;this.Vl[a]||this.Kf(a);return null};\nFo.prototype.nf=function(a,b,c,d,e){ib(a,\"String\",this.nf,0,'\"spaceId\" must be a string');if(!ya(b))throw new C(this.nf,1,'\"geojsonObject\" must be an object');Go(this.nf,2,c,d);if(e&&!ya(e))throw new C(this.nf,4,'\"opt_params\" must be an object');return Jo(this,a,c,d,\"PUT\",b,e)};Fo.prototype.putFeatures=Fo.prototype.nf;\nFo.prototype.lf=function(a,b,c,d,e){ib(a,\"String\",this.lf,0,'\"spaceId\" must be a string');if(!ya(b))throw new C(this.lf,1,'\"featureCollection\" must be an object');Go(this.lf,2,c,d);if(e&&!ya(e))throw new C(this.lf,4,'\"opt_params\" must be an object');return Jo(this,a,c,d,\"POST\",b,e)};Fo.prototype.postFeatures=Fo.prototype.lf;\nFo.prototype.If=function(a,b,c,d){ib(a,\"String\",this.If,0,'\"spaceId\" must be a string');if(!ya(b))throw new C(this.If,1,'\"params\" must be an object');Go(this.If,2,c,d);return Jo(this,a,c,d,\"DELETE\",A,b)};Fo.prototype.deleteFeatures=Fo.prototype.If;\nfunction Jo(a,b,c,d,e,f,g){var h=Object.assign(a.ns?{}:{authorization:\"Bearer \"+a.zx},{\"Content-Type\":\"application/geo+json\"},a.pc);e={method:e,headers:h};f&&(e.data=JSON.stringify(f));b=Ho(a.i().clone().A(b+\"/features\").u(g||{}));f=new qg(\"application/json\",b.toString(),De,e);f.then(c,ro(a,b,d));return f}Fo.prototype.Kf=function(a){var b=this;this.Vl[a]=Ko;this.qm(a,function(c){b.Vl[a]=Lo;b.st[a]=c.copyright;b.dispatchEvent(\"copyrightupdate\")},function(c){b.Vl[a]=Mo;throw c;})};\nfunction Io(a,b){return a.ns?b:Ho(b).u({access_token:a.zx})}function Ho(a){var b=Object.assign({},a.getQuery());delete b.apikey;return a.Tk(b)}Fo.CONFIG_KEY=\"xyz\";var Ko=1,Lo=2,Mo=-1;function Go(a,b,c,d){if(!db(c))throw new C(a,b,'\"onResult\" must be a function');if(!db(d))throw new C(a,b+1,'\"onError\" must be a function');}X.prototype.SA=function(a){return this.Ja(Fo,a)};X.prototype.getXYZService=X.prototype.SA;function No(a,b,c){var d;No.g.constructor.call(this,c?{min:c.min,max:c.max,engineType:c.engineType}:void 0);B(a,Fo,No,0);if(!lb(b))throw new C(No,1,'\"spaceId\" must be a string');this.$=a;this.Gg=b;this.Ok={};if(c&&([\"limit\",\"simplificationLevel\",\"tags\"].forEach(function(e){e in c&&(this.Ok[e]=c[e])},this),a=c.parameters))for(d in a)this.Ok[d]=a[d];this.Xa(this.Ep())}u(No,R);t(\"H.service.xyz.Provider\",No);No.prototype.o=function(a,b,c,d,e){return this.$.lm(a,b,c,this.Gg,d,e,this.Ok)};\nNo.prototype.requestInternal=No.prototype.o;No.prototype.U=function(){return this.$.U(this.Gg)};No.prototype.getCopyrights=No.prototype.U;No.prototype.Xc=We;No.prototype.providesOMV=No.prototype.Xc;No.prototype.K=function(){return this.mb()};No.prototype.getStyle=No.prototype.K;No.prototype.Cb=function(a){B(a,Xg)&&a.Yb(\"MVT\");this.Xa(a)};No.prototype.setStyle=No.prototype.Cb;\nNo.prototype.Ep=function(){return this.vb===mi.WEBGL?new Xg({sources:{xyz:{type:\"MVT\"}},layers:{xyz:{data:{source:\"xyz\",layer:this.Gg},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",size:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#000000\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}):\nnew H.map.render.harp.Style({styles:[{layer:this.Gg,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,8,14,12,18,16]},{layer:this.Gg,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"polygon\",color:\"#E39E3C\",renderOrder:201},{layer:this.Gg,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",width:\"1px\",renderOrder:202},{layer:this.Gg,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",\ncolor:\"#000000\",width:\"2px\",renderOrder:203}]})};function Oo(a){Oo.g.constructor.call(this,Oo,a)}u(Oo,oo);t(\"H.service.WaypointsSequenceService\",Oo);Oo.CONFIG_KEY=\"waypointsSequence\";Oo.prototype.hz=function(a,b,c){a=this.i().clone().la(\"wps\").wc(\"v8/findsequence2\").u(a);return this.o(a,b,c)};Oo.prototype.findSequence=Oo.prototype.hz;X.prototype.RA=function(a){return this.Ja(Oo,a)};X.prototype.getWaypointsSequenceService=X.prototype.RA;function Po(a){Po.g.constructor.call(this,Po,a)}u(Po,oo);t(\"H.service.publicTransit.Service\",Po);Po.prototype.Da=function(){return{subDomain:\"transit.router\",path:\"v8\"}};Po.CONFIG_KEY=\"publicTransit\";Po.prototype.BA=function(a,b,c){a=this.i().clone().A(\"routes\").u(a);return this.o(a,b,c)};Po.prototype.getRoutes=Po.prototype.BA;Po.prototype.Jz=function(a,b,c){a=this.i().clone().A(\"departures\").u(a);return this.o(a,b,c)};Po.prototype.getDepartures=Po.prototype.Jz;\nPo.prototype.FA=function(a,b,c){a=this.i().clone().A(\"stations\").u(a);return this.o(a,b,c)};Po.prototype.getStations=Po.prototype.FA;Po.prototype.Jc=function(a){return Error(JSON.stringify(a))};X.prototype.xA=function(a){return this.Ja(Po,a)};X.prototype.getPublicTransitService=X.prototype.xA;X.prototype.Xl=function(a,b,c,d,e,f){function g(Pa,ic,jc){ic=Pa.rm(ic);ic=r?new Xg(ic):new H.map.render.harp.Style(ic);var La={engineType:l};p&&p.politicalView&&(La.politicalView=p.politicalView);c&&(La.lg=c);d&&(La.lg2=d);f&&(La.pois=f);var Cc;jc&&(Cc={dark:jc});return Pa.od(ic,La,Cc)}function h(Pa,ic,jc,La,Cc){return Pa.Pd(ic,jc,v,La,w,1,Cc,n)}var k=this,l=li,n={crossOrigin:\"anonymous\"};if(ya(a)){var p=a;\"crossOrigin\"in p&&(n.crossOrigin=p.crossOrigin);a=p.tileSize;b=p.ppi;c=p.lg;d=p.lg2;e=p.style;\nf=p.pois;void 0!==p.engineType&&(l=p.engineType,n.engineType=l)}var q=l===mi.HARP,r=l===mi.WEBGL,v=a||512,w={};if(0>[72,250,320,500].indexOf(+b)){if(b!==A)throw new C(this.Xl,1,b);}else w.ppi=+b;c&&(w.lg=c);d&&(w.lg2=d);e&&(w.style=e);f&&(w.pois=!!f);if(q&&!H.map.render.harp)throw new C(this.Xl,0,\"HARP engine is not supported, module not found\");a={};e=this.Kp();var y=this.Kp({type:\"aerial\"}),F=this.Sp(),G=F.vt(w.lg?{lg:w.lg,i18n:!0,engineType:l}:{engineType:l});ho(a,{raster:{normal:{xbase:h(e,\"xbasetile\",\n\"normal.day\",\"png8\",!1),xbasenight:h(e,\"xbasetile\",\"normal.night\",\"png8\",!0),base:h(e,\"basetile\",\"normal.day\",\"png8\",!1),basenight:h(e,\"basetile\",\"normal.night\",\"png8\",!0),map:h(e,\"maptile\",\"normal.day\",\"png8\",!1),mapnight:h(e,\"maptile\",\"normal.night\",\"png8\",!0),trafficincidents:G,transit:h(e,\"maptile\",\"normal.day.transit\",\"png8\",!1),labels:h(e,\"labeltile\",\"normal.day\",\"png\",!1)},satellite:{xbase:h(y,\"xbasetile\",\"hybrid.day\",\"jpg\",!0),base:h(y,\"basetile\",\"hybrid.day\",\"jpg\",!0),map:h(y,\"maptile\",\"hybrid.day\",\n\"jpg\",!0),labels:h(y,\"labeltile\",\"hybrid.day\",\"png\",!0)},terrain:{xbase:h(y,\"xbasetile\",\"terrain.day\",\"jpg\",!1),base:h(y,\"basetile\",\"terrain.day\",\"jpg\",!1),map:h(y,\"maptile\",\"terrain.day\",\"jpg\",!1),labels:h(y,\"labeltile\",\"terrain.day\",\"png\",!1)}}});if(q||r){ho(a,{vector:{normal:{traffic:F.ut(void 0,l),trafficincidents:G}}});y=this.Lj({queryParams:{content:\"default,transit\"}});e=this.Tp();F=this.Lj({queryParams:{content:\"default,advanced_roads,advanced_pois,transit\"}});var O=this.Lj({queryParams:{content:\"default,hillshade,contours,transit\"}});\nif(r)a.vector.normal.map=g(y,\"omv/miami/normal.day.yaml\"),a.vector.normal.truck=g(y,\"omv/miami/truck.day.yaml\");else if(q){a.vector.normal.map=g(y,\"harp/oslo/normal.day.json\");a.vector.normal.truck=g(y,\"harp/oslo/normal.day.json\");a.vector.normal.logistics=g(F,\"harp/oslo/logistics.day.json\");a.vector.normal.logisticsnight=g(F,\"harp/oslo/logistics.night.json\");G=g(O,\"harp/oslo/topo.day.json\");O=g(O,\"harp/oslo/topo.night.json\");var V=function(Pa){Pa=Pa.target;if(2===Pa.getState()){Pa.removeEventListener(\"change\",\nV);var ic=Pa.getEnabledFeatures()||[];[{feature:\"terrain\",mode:\"hillshade\"},{feature:\"contours\",mode:\"all\"}].forEach(function(jc){var La=ic.findIndex(function(Cc){return Cc.feature===jc.feature});ic.splice(La,-1===La?0:1,jc)});Pa.setEnabledFeatures(ic)}};G.D.K().addEventListener(\"change\",V);O.D.K().addEventListener(\"change\",V);a.vector.normal.topo=G;a.vector.normal.toponight=O;var Ua={ppi:72<b||void 0===b&&2<=window.devicePixelRatio?200:100,size:256<v?512:256,features:\"pois:\"+(!0===f||lb(f)&&/[^0]/.test(f)?\n\"all\":\"disabled\")};c&&(Ua.lang=c);d&&(Ua.lang2=d);p&&p.politicalView&&(Ua.pview=p.politicalView);b={dark:!0};G=function(Pa,ic,jc,La,Cc){var Kc=ho({},Ua);/^explore\\./.test(jc)||delete Kc.features;Pa=k.Qp({format:ic,resource:Pa,queryParams:ho({style:jc},Kc)});Cc=new Co(Pa,{engineType:l,style:Cc});return new sl(Cc,La)};ho(a.raster.normal,{base:G(\"background\",\"png8\",\"explore.day\"),basenight:G(\"background\",\"png8\",\"explore.night\",b),map:G(\"base\",\"png8\",\"explore.day\"),mapnight:G(\"base\",\"png8\",\"explore.night\",\nb),labels:G(\"label\",\"png\",\"explore.day\")});ho(a.raster.satellite,{xbase:G(\"background\",\"jpeg\",\"satellite.day\",b),base:G(\"background\",\"jpeg\",\"explore.satellite.day\",b),map:G(\"base\",\"jpeg\",\"explore.satellite.day\",b),labels:G(\"label\",\"png\",\"explore.satellite.day\")});ho(a.vector.normal,{mapnight:g(y,\"harp/oslo/normal.night.json\",!0),lite:g(y,\"harp/oslo/lite.day.json\"),litenight:g(y,\"harp/oslo/lite.night.json\",!0),ism:g(y,\"harp/oslo/road.network.day.json\"),ismnight:g(y,\"harp/oslo/road.network.night.json\",\n!0),roadnetwork:g(y,\"harp/oslo/road.network.day.json\"),roadnetworknight:g(y,\"harp/oslo/road.network.night.json\",!0)});O={styles:[{technique:\"raster\",attr:{gamma:[\"step\",[\"zoom\"],.9,13,1],brightness:[\"step\",[\"zoom\"],.6,12,.7,13,.8,14,.8,17,.9]}}]};for(var aa=[],vb=0;6>vb;vb++){var Ba=new H.map.render.harp.Style(JSON.parse(JSON.stringify(O)));Ba=G(\"background\",\"jpeg\",\"satellite.day\",b,Ba);aa.push(Ba)}a.hybrid={day:{raster:aa[0],vector:g(y,\"harp/oslo/hybrid.day.json\",!0),traffic:g(e,\"harp/oslo/hybrid.day.json\",\n!0)},night:{raster:aa[1],vector:g(y,\"harp/oslo/hybrid.night.json\",!0),traffic:g(e,\"harp/oslo/hybrid.night.json\",!0)},liteday:{raster:aa[2],vector:g(y,\"harp/oslo/lite.hybrid.day.json\",!0),traffic:g(e,\"harp/oslo/lite.hybrid.day.json\",!0)},litenight:{raster:aa[3],vector:g(y,\"harp/oslo/lite.hybrid.night.json\",!0),traffic:g(e,\"harp/oslo/lite.hybrid.night.json\",!0)},logistics:{raster:aa[4],vector:g(F,\"harp/oslo/logistics.hybrid.day.json\",!0),traffic:g(e,\"harp/oslo/logistics.hybrid.day.json\",!0)},logisticsnight:{raster:aa[5],\nvector:g(F,\"harp/oslo/logistics.hybrid.night.json\",!0),traffic:g(e,\"harp/oslo/logistics.hybrid.night.json\",!0)}}}y={traffic:{}};y.traffic.map=g(e,r?\"traffic/vector.tile.yaml\":\"harp/oslo/normal.day.json\");q&&(y.traffic.logistics=g(e,\"harp/oslo/logistics.day.json\"),y.traffic.logisticsnight=g(e,\"harp/oslo/logistics.night.json\"),y.traffic.mapnight=g(e,\"harp/oslo/normal.night.json\"),y.traffic.lite=g(e,\"harp/oslo/lite.day.json\"),y.traffic.litenight=g(e,\"harp/oslo/lite.night.json\"),y.traffic.topo=g(e,\"harp/oslo/topo.day.json\"),\ny.traffic.toponight=g(e,\"harp/oslo/topo.night.json\"));ho(a.vector,y)}return a};X.prototype.createDefaultLayers=X.prototype.Xl;function Do(a){a=void 0===a?{}:a;Do.g.constructor.call(this,Do,a);this.Ci={Rn:a.resource||\"base\",Dn:a.projection||\"mc\",format:a.format||\"png8\"};this.Fn=a.queryParams||{}}u(Do,oo);t(\"H.service.rasterTile.Service\",Do);m=Do.prototype;m.K=function(){return this.Fn.style||\"explore.day\"};m.Sf=function(a,b,c){return this.i().clone().A(this.Ci.Rn+\"/\"+(this.Ci.Dn+\"/\")+(c+\"/\"+a+\"/\"+b+\"/\")+this.Ci.format).u(this.Fn)};m.Da=function(){return{subDomain:\"maps\",path:\"v3\"}};\nm.U=function(){this.ec||this.Kf();return this.ec};m.Kf=function(){this.ec=new to;this.o(this.i().clone().A(\"copyright\"),z(this.pl,this),Ye)};m.pl=function(a){var b=a.copyrights;a=a.resources;var c={},d=this.Ci.Rn+\".\"+this.K();c[d]=[];a[this.Ci.Rn].styles[this.K()].forEach(function(e){b[e].forEach(function(f){var g=[];f.boundingBoxes.forEach(function(h){g.push([h.north,h.west,h.south,h.east])});c[d].push({boxes:g,label:f.label,alt:f.alt,minLevel:f.minLevel,maxLevel:f.maxLevel})})});uo(this.ec,c)};\nm.Kj=function(a,b){return this.o(this.i().clone().A(\"info\"),a,b)};Do.prototype.getInfo=Do.prototype.Kj;Do.prototype.Nj=function(a,b){return this.o(this.i().clone().A(\"politicalViews\"),a,b)};Do.prototype.getPoliticalViews=Do.prototype.Nj;Do.prototype.Sz=function(a,b){return this.o(this.i().clone().A(\"features\"),a,b)};Do.prototype.getFeatures=Do.prototype.Sz;Do.prototype.Ip=function(a,b){return this.o(this.i().clone().A(\"languages\"),a,b)};Do.prototype.getLanguages=Do.prototype.Ip;Do.CONFIG_KEY=\"rasterTile\";\nX.prototype.Qp=function(a){return this.Ja(Do,a)};X.prototype.getRasterTileService=X.prototype.Qp;function Qo(a){Qo.g.constructor.call(this,Qo,a);this.Kw=po(this,a).reverseSubDomain;io(Qo,\"Use HERE Geocoding and Search API v7 instead.\")}u(Qo,oo);t(\"H.service.GeocodingService\",Qo);Qo.prototype.Da=function(){return{subDomain:\"geocoder.ls\",reverseSubDomain:\"reverse\",path:\"6.2\"}};Qo.CONFIG_KEY=\"geocoding\";Qo.prototype.Jc=function(a){return Error(a.Details||a.message||a.error)};Qo.prototype.xp=function(a,b,c){a=this.i().clone().A(\"geocode.json\").u(a);return this.o(a,b,c)};\nQo.prototype.geocode=Qo.prototype.xp;Qo.prototype.Fr=function(a,b,c){a=this.i().clone().A(\"reversegeocode.json\").u(a);this.Kw&&a.la(this.Kw);return this.o(a,b,c)};Qo.prototype.reverseGeocode=Qo.prototype.Fr;Qo.prototype.search=function(a,b,c){a=this.i().clone().A(\"search.json\").u(a);return this.o(a,b,c)};Qo.prototype.search=Qo.prototype.search;X.prototype.Tz=function(a){return this.Ja(Qo,a)};X.prototype.getGeocodingService=X.prototype.Tz;function Ro(a){Ro.g.constructor.call(this,Ro,a)}u(Ro,oo);t(\"H.service.GeofencingService\",Ro);Ro.CONFIG_KEY=\"geofencing\";Ro.prototype.Jc=function(a){return Error(a.issues&&a.issues[0]?a.issues[0].message:a.message,{cause:a})};Ro.prototype.qz=function(a,b,c){a=this.i().clone().la(\"geofencing\").wc(\"v8/geofence\").u(a);return this.I(a,\"GET\",b,c)};Ro.prototype.geofence=Ro.prototype.qz;\nRo.prototype.delete=function(a,b,c){a=this.i().clone().la(\"geofencing\").wc(\"v8/geofence/delete\").u(a);return this.I(a,\"GET\",b,c)};Ro.prototype[\"delete\"]=Ro.prototype.delete;Ro.prototype.upload=function(a,b,c,d){a=this.i().clone().la(\"geofencing\").wc(\"v8/geofence/upload\").u(a);b=So(Ro.prototype.upload,b);return this.I(a,\"POST\",c,d,b)};Ro.prototype.upload=Ro.prototype.upload;\nRo.prototype.modify=function(a,b,c,d){a=this.i().clone().la(\"geofencing\").wc(\"v8/geofence/modify\").u(a);b=So(Ro.prototype.modify,b);return this.I(a,\"POST\",c,d,b)};Ro.prototype.modify=Ro.prototype.modify;function So(a,b){if(!(b instanceof Blob))throw new C(a,1,\"must be an instance of Blob\");a=new FormData;a.append(\"file\",b);return a}\nRo.prototype.I=function(a,b,c,d,e,f){f=void 0===f?\"application/json\":f;b={method:b,headers:Object.assign({},this.pc),data:e?e:void 0};f=new qg(f,a.toString(),De,b);f.then(c,ro(this,a,d));return f};function To(a){To.g.constructor.call(this,To,a);io(To,\"Use HERE Geofencing API v8 instead.\")}u(To,oo);t(\"H.service.extension.geofencing.Service\",To);To.prototype.Da=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};To.CONFIG_KEY=\"geofencing\";To.prototype.request=function(a,b,c,d){return this.I(a,b,c,d)};To.prototype.request=To.prototype.request;To.prototype.Jc=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a.message||a.response_code)};\nTo.prototype.I=function(a,b,c,d){if(!a)throw new C(this.request,0,a);if(!db(c))throw new TypeError(\"onResult must be a function\");if(!db(d))throw new TypeError(\"onError must be a function\");a=this.i().clone().A(a+\".json\").u(b);return this.o(a,c,d)};To.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};X.prototype.ku=function(a,b){b=b?+b:void 0;if(void 0===b)b=To;else if(8===b)b=Ro;else throw new C(this.ku,1,\"allowed values are 8 or undefined\");return this.Ja(b,a)};X.prototype.getGeofencingService=X.prototype.ku;function Uo(a){Uo.g.constructor.call(this,Uo,a)}u(Uo,oo);t(\"H.service.traffic.Service7\",Uo);Uo.prototype.Da=function(){return{subDomain:\"data.traffic\",path:\"v7\"}};Uo.CONFIG_KEY=\"traffic_v7\";Uo.prototype.MC=function(a,b,c,d){a=this.i().clone().A([\"incidents\",a].join(\"/\")).u(b||{});return this.o(a,c,d)};Uo.prototype.requestIncidentById=Uo.prototype.MC;Uo.prototype.KC=function(a,b,c){a=this.i().clone().A(\"flow\").u(a||{});return this.o(a,b,c)};Uo.prototype.requestFlowByArea=Uo.prototype.KC;\nUo.prototype.PC=function(a,b,c){a=this.i().clone().A(\"incidents\").u(a||{});return this.o(a,b,c)};Uo.prototype.requestIncidentsByArea=Uo.prototype.PC;function Vo(a){if(!a||!db(a.requestData))throw new C(Vo,0,\"options.requestData\");Vo.g.constructor.call(this,a);this.JC=a.requestData;this.yC=!!a.providesDomMarkers}u(Vo,R);t(\"H.map.provider.MarkerTileProvider\",Vo);Vo.prototype.o=function(a,b,c,d,e){var f=this;return this.JC(a,b,c,function(g){for(var h=[],k,l,n=g.length;n--;)l=g[n],l.uD=f.getTileKey(a,b,c),l.ea(f),k=l.kc(),(B(l,Li)||1===k.getState())&&h.push(g[n]);d(h)},e)};Vo.prototype.requestInternal=Vo.prototype.o;\nVo.prototype.Hh=function(a,b){b===hh.VISUAL&&(a=this.Sb().get(a.uD))&&(a.valid=!1,this.jb(a))};Vo.prototype.invalidateObject=Vo.prototype.Hh;Vo.prototype.Vc=function(){return this.yC};Vo.prototype.providesDomMarkers=Vo.prototype.Vc;Vo.prototype.Wc=We;Vo.prototype.providesMarkers=Vo.prototype.Wc;function Wo(){this.vd={}}Wo.prototype.kc=function(a,b){var c=a+b,d;if(d=this.vd[c])return d;a=Xo.MARKER.replace(\"{{icon}}\",Yo[a]||Yo.OTHER);a=a.replace(\"{{color}}\",Zo[b]||Zo.BLOCKING);b={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Gi(Hi.POLYGON,$o.MARKER)};return this.vd[c]=d=new zm(a,b)};\nvar Xo={MARKER:'<svg width=\"26\" height=\"33\" enable-background=\"new 0 0 26 33\" viewBox=\"0 0 26 33\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m26 33h-26v-33h26z\" fill=\"#8c8c8c\" opacity=\"0\"/><path d=\"m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026\" fill=\"#878787\" opacity=\".6\"/><path d=\"m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z\" fill=\"{{color}}\"/>{{icon}}</svg>'},Yo=\n{CONGESTION:'<path style=\"fill:#FFFFFF;\" d=\"M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z\"/>',\nROADWORKS:'<path d=\"m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z\" fill=\"#fff\"/>',\nACCIDENT:'<path style=\"fill:#FFFFFF;\" d=\"M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z\"/>',\nOTHER:'<path style=\"fill:#FFFFFF;\" d=\"M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z\"/>'},\nZo={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},$o={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function ap(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");B(a,bp,ap,0);Vo.call(this,{max:20,min:8,requestData:z(this.NC,this),engineType:c.engineType});this.vd=new Wo;this.$=a;this.Ga=c;this.reload=z(this.reload,this);this.yr=setInterval(this.reload,b||18E4)}u(ap,Vo);t(\"H.service.traffic.incidents.Provider\",ap);var cp={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nap.prototype.NC=function(a,b,c,d,e){var f=this,g=this.vd;return this.$.requestIncidentsByTile(a,b,c,function(h){var k=[];h=h.TRAFFIC_ITEMS;var l;if(h)for(h=h.TRAFFIC_ITEM,l=h.length;l--;){var n=h[l];var p=n.TRAFFIC_ITEM_TYPE_DESC;switch(p){case \"ACCIDENT\":case \"CONGESTION\":var q=p;break;case \"CONSTRUCTION\":q=\"ROADWORKS\";break;default:q=\"OTHER\"}q=g.kc(q,cp[n.CRITICALITY.DESCRIPTION]);p=n.LOCATION.GEOLOC.ORIGIN;p=new bn({lat:p.LATITUDE,lng:p.LONGITUDE},{provider:f,icon:q});p.setData(n);k.push(p)}d(k)},\ne,this.Ga)};ap.prototype.l=function(){Vo.prototype.l.call(this);clearInterval(this.yr)};ap.prototype.dispose=ap.prototype.l;var dp=\"A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A\".split(\" \");function ep(a,b,c,d){ep.g.constructor.call(this,{min:10,max:21,engineType:d});B(a,bp,ep,0);this.$=a;this.Ga=c||fp;this.Ga.responseattributes=\"sh,fc\";this.yr=setInterval(z(this.reload,this),b||18E4);this.vb===mi.WEBGL?this.Xa(new Xg(a.rm(\"traffic/flow.yaml\")),!0):this.Xa(new H.map.render.harp.Style({styles:[{when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",renderOrder:10002,attr:{color:[\"case\",[\">=\",[\"get\",\"JF\"],10],\"black\",[\">=\",[\"get\",\"JF\"],8],\"red\",[\">=\",[\"get\",\"JF\"],4],\"yellow\",\n\"green\"],width:3,metricUnit:\"Pixel\"}}]}))}u(ep,R);t(\"H.service.traffic.flow.Provider\",ep);ep.prototype.rr=We;ep.prototype.providesGeoJSON=ep.prototype.rr;ep.prototype.K=function(){return this.mb()};ep.prototype.getStyle=ep.prototype.K;ep.prototype.Cb=function(a){a.Yb&&a.Yb(\"GeoJSONTileSource\");this.Xa(a)};ep.prototype.setStyle=ep.prototype.Cb;var fp={locationreferences:\"tmc,shp\"};ep.prototype.disposeInternal=function(){ep.g.disposeInternal.call(this);clearInterval(this.yr)};\nep.prototype.o=function(a,b,c,d,e){return this.$.requestFlowByTile(a,b,c,function(f){f.type&&-1!==f.type.indexOf(\"Error\")?e(f.Details):d(f)},e,this.Ga)};ep.prototype.requestInternal=ep.prototype.o;\nep.prototype.pd=function(a,b,c,d,e){var f,g,h,k,l={type:\"FeatureCollection\",features:[]},n;var p=d.RWS.length;for(f=0;f<p;f++){var q=d.RWS[f];var r=q.RW;var v=r.length;var w=-1!==dp.indexOf(q.EXTENDED_COUNTRY_CODE+q.EBU_COUNTRY_CODE);for(q=0;q<v;q++){var y=r[q].FIS;var F=y.length;for(y=0;y<F;y++){var G=r[q].FIS[y].FI;var O=G.length;for(g=0;g<O;g++){var V=G[g];var Ua=[];var aa=V.CF[0];var vb=!!aa.SSS;var Ba={type:\"Feature\",properties:aa,geometry:{type:\"MultiLineString\",coordinates:Ua}};Ba.properties.LHT=\nw;V.SHP.length&&(Ba.properties.FC=V.SHP[0].FC);vb&&(n=[]);for(aa=0;aa<V.SHP.length;aa++){var Pa=V.SHP[aa].value;var ic=Pa.length;for(h=0;h<ic;h++){var jc=vb?n:void 0,La=new Qa(Pa[h].trim()),Cc=[],Kc={};for(La.yi();-1!==(k=La.eb());)k===gp?(Kc.lat=+String.fromCharCode.apply(ep,La.mh()),La.next(),La.yi()):k===hp?(Kc.lng=+String.fromCharCode.apply(ep,La.mh()),Cc.push([Kc.lng,Kc.lat]),jc&&jc.push(vc(Kc)),Kc=[],La.next(),La.yi()):La.next();Kc.lng=+String.fromCharCode.apply(ep,La.mh());Cc.push([Kc.lng,\nKc.lat]);jc&&jc.push(vc(Kc));k=Cc;Ua.push(k)}}l.features.push(Ba)}}}}return ep.g.pd.call(this,a,b,c,l,e)};ep.prototype.createTileInternal=ep.prototype.pd;var hp=32,gp=44;function ip(a){function b(n){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete ip.Br[f];n&&a.Ot&&a.Ot.call(k,n)}if(!a.url||!a.Oo)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.Oo)throw Error(\"Parameters options.callback must be a function\");var c=a.ZD||document;var d=c.getElementsByTagName(\"head\")[0];var e=c.createElement(\"script\");c=a.url instanceof W?a.url:vo(a.url,a.XD);var f=ip.TC++;var g=a.xy||\"callback\";var h=a.Oo;var k={};var l=\nnull;k.id=f;k.cancel=function(){b(\"cancelled\")};0!==a.timeout&&(l=globalThis.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));ip.Br[f]=function(n){b();h.call(k,n)};e.type=\"text/javascript\";e.src=c.toString()+(c.Du()?\"&\":\"?\")+g+\"=\"+(a.$D?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}t(\"H.service.jsonp\",ip);ip.VA=function(a){return(a=ip.Br[a])?a:function(){}};ip.handleResponse=ip.VA;ip.TC=0;ip.Br={};function bp(a){bp.g.constructor.call(this,bp,a);this.yy=po(this,a).callbackKey;this.Ye=!1}u(bp,oo);t(\"H.service.traffic.Service\",bp);bp.prototype.Da=function(){return{subDomain:\"traffic.ls\",path:\"traffic/6.1\",callbackKey:\"jsoncallback\"}};bp.CONFIG_KEY=\"traffic\";bp.prototype.ut=function(a,b){return new sl(new ep(this,void 0,a,b),{max:22})};bp.prototype.createFlowLayer=bp.prototype.ut;bp.prototype.vt=function(a){return new Zm(new ap(this,void 0,a))};bp.prototype.createIncidentsLayer=bp.prototype.vt;\nfunction jp(a,b,c,d){a.Ye||(io(bp,\"Use HERE Traffic API v7 instead.\"),a.Ye=!0);return ip({url:b,Oo:c,Ot:function(e){d(Error(\"[\"+e+\"] \"+b+\" request failed\"))},xy:a.yy})}bp.prototype.OC=function(a,b,c){a=this.i().clone().A(\"incidents.json\").u(a);return jp(this,a,b,c)};bp.prototype.requestIncidents=bp.prototype.OC;bp.prototype.LC=function(a,b,c,d,e,f){a=this.i().clone().A([\"flow/json\",c,a,b].join(\"/\")).u(f||{});return jp(this,a,d,e)};bp.prototype.requestFlowByTile=bp.prototype.LC;\nbp.prototype.QC=function(a,b,c,d,e,f){a=this.i().clone().A([\"incidents/json\",c,a,b].join(\"/\")).u(f||{});return jp(this,a,d,e)};bp.prototype.requestIncidentsByTile=bp.prototype.QC;bp.prototype.rm=function(a){return kn()+\"/\"+a};X.prototype.Sp=function(a,b){b=b||6;if(6===b)b=bp;else if(7===b)b=Uo;else throw new C(this.Sp,1,\"allowed values are 6 and 7\");return this.Ja(b,a)};X.prototype.getTrafficService=X.prototype.Sp;function kp(a,b,c){c=c||{};var d=+c.min,e=+c.max;c.min=d?gc(d,1,17):1;c.max=e?gc(e,1,17):17;kp.g.constructor.call(this,c);B(a,lp,kp,0);B(b,zg,kp,1);this.$=a;b.Yb&&b.Yb(\"OMV\");this.Xa(b,!0);this.Hl=go(this)}u(kp,R);t(\"H.service.trafficVectorTile.Provider\",kp);kp.prototype.Xc=We;kp.prototype.providesOMV=kp.prototype.Xc;kp.prototype.cc=function(a){return this.Hl.test(a)};kp.prototype.cacheFilter=kp.prototype.cc;kp.prototype.Vd=function(a,b,c){return this.$.Sf(a,b,c).toString()};\nkp.prototype.getTileKey=kp.prototype.Vd;kp.prototype.Sb=function(){return this.wf};kp.prototype.getCache=kp.prototype.Sb;kp.prototype.MAX_STORE_TIME=2592E6;kp.prototype.Vi=function(){return pm()};kp.prototype.td=function(){return pm()?om():kp.g.td.call(this)};kp.prototype.o=function(a,b,c,d,e){return this.$.Pa(a,b,c,d,e)};kp.prototype.requestInternal=kp.prototype.o;kp.prototype.Cb=function(a){a.Yb&&a.Yb(\"OMV\");this.Xa(a)};kp.prototype.setStyle=kp.prototype.Cb;kp.prototype.K=function(){return kp.g.mb.apply(this)};\nkp.prototype.getStyle=kp.prototype.K;kp.prototype.wf=new kk(256);kp.prototype.U=function(){return null};kp.prototype.getCopyrights=kp.prototype.U;function lp(a){lp.g.constructor.call(this,lp,a);this.Aq=(a||$e).layer||\"traffic\";this.me=\"mc\";this.lz=\"omv\"}u(lp,oo);t(\"H.service.trafficVectorTile.Service\",lp);lp.prototype.Da=function(){return{subDomain:\"traffic.vector\",path:\"v2\"}};lp.CONFIG_KEY=\"trafficVectorTile\";lp.prototype.od=function(a,b,c){b=b||{};var d={min:0,max:22};ya(c)&&ho(d,c);return new sl(new kp(this,a,b),d)};lp.prototype.createLayer=lp.prototype.od;\nlp.prototype.Pa=function(a,b,c,d,e){return this.o(this.Sf(a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,\"arraybuffer\")};lp.prototype.Sf=function(a,b,c){return this.i().clone().A(\"traffictiles/\"+this.Aq+\"/\"+this.me+\"/\"+c+\"/\"+a+\"/\"+b+\"/\"+this.lz)};lp.prototype.rm=function(a){return kn()+\"/\"+a};lp.prototype.cA=function(){return this.Aq};lp.prototype.getLayerName=lp.prototype.cA;X.prototype.Tp=function(a){return this.Ja(lp,a)};X.prototype.getTrafficVectorTileService=X.prototype.Tp;function mp(a){mp.g.constructor.call(this,mp,a)}u(mp,oo);t(\"H.service.SearchService\",mp);mp.CONFIG_KEY=\"search\";mp.prototype.Da=function(){return{subDomain:\"search\",path:\"v1\"}};mp.prototype.Jc=function(a){a=[a.title,a.action,a.cause].filter(function(b){return b});return Error(a.join(\". \"))};mp.prototype.xp=function(a,b,c){a=this.i().clone().la(\"geocode\").A(\"geocode\").u(a);return this.o(a,b,c)};mp.prototype.geocode=mp.prototype.xp;\nmp.prototype.Fr=function(a,b,c){a=this.i().clone().la(\"revgeocode\").A(\"revgeocode\").u(a);return this.o(a,b,c)};mp.prototype.reverseGeocode=mp.prototype.Fr;mp.prototype.qy=function(a,b,c){a=this.i().clone().la(\"autosuggest\").A(\"autosuggest\").u(a);return this.o(a,b,c)};mp.prototype.autosuggest=mp.prototype.qy;mp.prototype.autocomplete=function(a,b,c){a=this.i().clone().la(\"autocomplete\").A(\"autocomplete\").u(a);return this.o(a,b,c)};mp.prototype.autocomplete=mp.prototype.autocomplete;\nmp.prototype.Ty=function(a,b,c){a=this.i().clone().la(\"discover\").A(\"discover\").u(a);return this.o(a,b,c)};mp.prototype.discover=mp.prototype.Ty;mp.prototype.zB=function(a,b,c){a=this.i().clone().la(\"lookup\").A(\"lookup\").u(a);return this.o(a,b,c)};mp.prototype.lookup=mp.prototype.zB;mp.prototype.uy=function(a,b,c){a=this.i().clone().la(\"browse\").A(\"browse\").u(a);return this.o(a,b,c)};mp.prototype.browse=mp.prototype.uy;X.prototype.EA=function(a){return this.Ja(mp,a)};\nX.prototype.getSearchService=X.prototype.EA;function np(a){io(np,\"Use HERE Geocoding and Search API v7 instead.\");np.g.constructor.call(this,np,a)}u(np,oo);t(\"H.service.PlacesService\",np);np.prototype.Da=function(){return{subDomain:\"places.ls\",path:\"places/v1\"}};np.CONFIG_KEY=\"places\";np.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};np.prototype.request=function(a,b,c,d){return this.I(a,b,c,d)};np.prototype.request=np.prototype.request;\nnp.prototype.I=function(a,b,c,d){a=this.i().clone().A(a).u(b||{});return this.o(a,c,d)};np.prototype.search=function(a,b,c){return this.I(\"discover/search\",a,b,c)};np.prototype.search=np.prototype.search;np.prototype.sD=function(a,b,c){return this.I(\"suggest\",a,b,c)};np.prototype.suggest=np.prototype.sD;np.prototype.fz=function(a,b,c){return this.I(\"discover/explore\",a,b,c)};np.prototype.explore=np.prototype.fz;np.prototype.oy=function(a,b,c){return this.I(\"discover/around\",a,b,c)};\nnp.prototype.around=np.prototype.oy;np.prototype.XA=function(a,b,c){return this.I(\"discover/here\",a,b,c)};np.prototype.here=np.prototype.XA;np.prototype.Ay=function(a,b,c){return this.I(\"categories/places\",a,b,c)};np.prototype.categories=np.prototype.Ay;np.prototype.jz=function(a,b,c,d){a=vo(a).u(this.i().getQuery()).u(d||{});return this.o(a,b,c)};np.prototype.follow=np.prototype.jz;X.prototype.qA=function(a){return this.Ja(np,a)};X.prototype.getPlacesService=X.prototype.qA;function op(){}t(\"H.service.extension.dataView.IRow\",op);op.prototype.ab=function(){};op.prototype.getColumnNames=op.prototype.ab;op.prototype.va=function(){};op.prototype.getCell=op.prototype.va;op.prototype.Rf=function(){};op.prototype.getTable=op.prototype.Rf;function pp(){}t(\"H.service.extension.dataView.ITable\",pp);pp.prototype.zh=function(){};pp.prototype.getMeta=pp.prototype.zh;pp.prototype.Ch=function(){};pp.prototype.getRowCount=pp.prototype.Ch;pp.prototype.Ud=function(){};pp.prototype.getRow=pp.prototype.Ud;pp.prototype.ab=function(){};pp.prototype.getColumnNames=pp.prototype.ab;pp.prototype.Fj=function(){};pp.prototype.getColumn=pp.prototype.Fj;pp.prototype.va=function(){};pp.prototype.getCell=pp.prototype.va;pp.prototype.concat=function(){};\npp.prototype.concat=pp.prototype.concat;function qp(){}t(\"H.service.extension.dataView.IColumn\",qp);qp.prototype.va=function(){};qp.prototype.getCell=qp.prototype.va;function rp(a,b,c,d){if(!db(c))throw new C(a,b,\"has invalid type\");if(!db(d))throw new C(a,b+1,\"has invalid type\");};function sp(a,b){this.$b=a;this.Kk=b}t(\"H.service.extension.dataView.ObjRow\",sp);sp.prototype.ab=function(){return this.$b.ab()};sp.prototype.getColumnNames=sp.prototype.ab;sp.prototype.va=function(a){return this.$b.va(this.Kk,a)};sp.prototype.getCell=sp.prototype.va;sp.prototype.Rf=function(){return this.$b};sp.prototype.getTable=sp.prototype.Rf;function tp(a,b){this.$b=a;this.Nl=b}t(\"H.service.extension.dataView.ObjColumn\",tp);tp.prototype.va=function(a){return this.$b.va(a,this.Nl)};tp.prototype.getCell=tp.prototype.va;function up(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):A);this.Ob=a;if(b)for(this.eh=b,this.To=a=Za(),d=b.length;d--;)a[b[d]]=!0;c!==A&&(this.Lq=c)}t(\"H.service.extension.dataView.ObjTable\",up);m=up.prototype;m.Lq=A;m.Ob=A;m.eh=A;m.To=A;m.zh=function(){return this.Lq};up.prototype.getMeta=up.prototype.zh;up.prototype.Ch=function(){return this.Ob?this.Ob.length:0};up.prototype.getRowCount=up.prototype.Ch;up.prototype.Ud=function(a){var b=this.Ob;return b&&b[a]?new sp(this,a):A};\nup.prototype.getRow=up.prototype.Ud;up.prototype.ab=function(){return this.eh||Ze};up.prototype.getColumnNames=up.prototype.ab;up.prototype.Fj=function(a){return this.To[a]?new tp(this,a):A};up.prototype.getColumn=up.prototype.Fj;up.prototype.va=function(a,b){var c=this.Ob;return(a=c&&this.To[b]&&c[a])&&a[b]};up.prototype.getCell=up.prototype.va;\nup.prototype.concat=function(){var a=arguments.length,b,c=this.eh,d=\"\"+this.eh,e=(this.Ob||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof up))throw new C(this.concat,b);if(f.Ob){if(c&&\"\"+f.eh!==d)throw new C(this.concat,b,\"Incompatible columns!\");e=e.concat(f.Ob)}}return new up(e,this.eh,this.Lq)};up.prototype.concat=up.prototype.concat;function vp(a){this.zy=a}vp.prototype.cancel=function(){for(var a=this.zy,b=a.length;b--;)a[b].cancel();a.length=0};vp.prototype.cancel=vp.prototype.cancel;function wp(a,b,c,d,e,f){rp(wp,1,b,c);rp(wp,2,d,e);(this.Tn=a.length)?(this.Ob=a,this.mn=b,this.dn=c,this.kk=0,this.vn=z(this.vn,this),this.Jy=d,this.Hy=e,this.Yh=Za(),Wa(this.Yh,xp,f||{}),this.ks={},globalThis.setTimeout(this.vn,0)):b(Ze,!0)}var xp={duration:100,sz:\"geometry\",rz:\"WKT\",XC:\"searchAttributes\",At:A};\nwp.prototype.vn=function(){var a=[];var b=!1;for(var c=rk(),d;this.kk<this.Tn;){var e=this.Ob[this.kk];b=e.attributes;d=e.layerId||this.Yh.At;e.distance&&(b[this.Yh.XC]={nearest:new tc(e.nearestLat,e.nearestLon),distance:e.distance});if(e=e[this.Yh.sz]){try{var f=Pf(new Qa(e))}catch(g){this.dn(new globalThis.Error(g.message));b=!0;break}b[this.Yh.rz]=f}(e=this.ks[d])||(e=this.ks[d]=this.Jy({layerId:d,columnNames:Object.keys(b)}));b=this.Hy(e,b);a.push(b);this.kk++;if((b=this.kk===this.Tn)||rk()-c>=\nthis.Yh.duration){this.mn(a,b);break}}b?this.ks={}:this.kl=globalThis.setTimeout(this.vn,0)};wp.prototype.cancel=function(){globalThis.clearTimeout(this.kl);this.kk<this.Tn&&this.dn(new globalThis.Error(\"parsing canceled\"))};wp.prototype.cancel=wp.prototype.cancel;function yp(a,b,c,d){d=d||Ap;this.Fk={};d.provider=a;this.invalidate=Xe;yp.g.constructor.call(this,b,d);delete this.invalidate;c&&(this.FD=c);this.ra(hh.ADD)}u(yp,Eh);t(\"H.service.remote.Spatial\",yp);var Ap={};yp.prototype.xb=function(){return this.FD||Eh.prototype.xb.call(this)};yp.prototype.getId=yp.prototype.xb;yp.prototype.Sn=Ye;yp.prototype.retain=yp.prototype.Sn;yp.prototype.release=We;yp.prototype.release=yp.prototype.release;function Bp(a,b){this.gm=a;b&&(this.labels=b)}var Cp=new Bp(Ze);\nyp.prototype.xh=function(a){return(this.Fk[a.key]||Cp).gm};yp.prototype.getGeometriesForTile=yp.prototype.xh;yp.prototype.Hp=function(a){return(this.Fk[a.key]||Cp).labels};yp.prototype.getLabels=yp.prototype.Hp;function Dp(a,b,c){a.Fk[b.key]=new Bp(c,void 0)};function Ep(a,b,c){var d=8===a;this.zi=b;this.Pt=c||Ye;(this.Mm=4===a||d)?this.Xe=d:this.Xu=1===a;this.cu=this.Mm?\"$HProjGeometry\":\"geometry\"}\nEp.prototype.parse=function(a,b,c){var d,e={},f=[],g,h;var k=0;for(g=c.length;k<g;k++){var l=c[k];var n=l.Rows;if(l=n.length){var p=Object.keys(n[0]).filter(function(v){return\"geometry\"!==v&&\"$HProjGeometry\"!==v});p=new up(n,p);for(h=0;h<l;h++){var q=n[h];if(d=q[this.cu]){if(delete q[this.cu],q=p.Ud(h))try{var r=this.Mm?Fp(this,a,b,q,d):Gp(this,a,q,d.path);r.ea(a);f.push(r)}catch(v){this.Pt(v.message)}}else this.Pt(\"Layer must contain geometries\")}}}e[this.Mm?\"spatials\":this.Xu?\"markers\":\"domMarkers\"]=\nf;return e};function Fp(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.zi&&a.zi(d);for(a=new yp(b,a.Xe,A,{style:l||a.Ry,data:d});k!==h;){b=f;d=b.push;l=g[k++];for(var n=0,p=l.length,q=[];n<p;)q.push(new K(l[n++],l[n++]));d.call(b,q)}Dp(a,c,[new ih(f,e.interiorsIndex,e.outlinesIndex)]);return a}function Gp(a,b,c,d){d=new tc(d[0],d[1]);var e=a.zi&&a.zi(c);a.Xu?(a={icon:e,data:c,provider:b},a=new bn(d,a)):(a={icon:e,data:c,provider:b},a=new Li(d,a));return a};function Hp(a){var b=Ip;if(!a||!lb(Re(a.layerId,a.layer))||!ob(a.level)||fb(a.rowFilter)&&!db(a.rowFilter)||fb(a.rowFilterContext)&&!ya(a.rowFilterContext))throw new C(b,1,fb(\"invalid layer config\")?\"invalid layer config\":a);};function Jp(a,b){var c={};this.sC=a;Wa(c,b||c);ym.call(this,c);this.Jn={};a=this.Nc(zh.SPATIAL);a.update(a.Md+1,hh.ADD)}u(Jp,ym);t(\"H.service.remote.ObjectProvider\",Jp);Jp.prototype.l=function(){ym.prototype.l.call(this)};Jp.prototype.dispose=Jp.prototype.l;Jp.prototype.qe=function(){return Ze};Jp.prototype.requestMarkers=Jp.prototype.qe;Jp.prototype.pe=function(){return Ze};Jp.prototype.requestDomMarkers=Jp.prototype.pe;Jp.prototype.xg=function(){return Ze};Jp.prototype.requestOverlays=Jp.prototype.xg;\nJp.prototype.Wc=We;Jp.prototype.providesMarkers=Jp.prototype.Wc;Jp.prototype.Vc=We;Jp.prototype.providesDomMarkers=Jp.prototype.Vc;Jp.prototype.ne=We;Jp.prototype.providesSpatials=Jp.prototype.ne;Jp.prototype.Nn=function(){return Ze};Jp.prototype.requestSpatials=Jp.prototype.Nn;function Kp(a){return a.Wd(!0)}Jp.prototype.On=function(a,b){a=Lp(this,a,Mp);b&&(a=a.filter(Kp));return a};Jp.prototype.requestSpatialsByTile=Jp.prototype.On;\nfunction Lp(a,b,c){var d=b.Ji&&b.Ji[c],e;!d&&(e=b.ul)&&(delete b.ul,(b.Ji=a=a.sC.parse(a,b,e))&&(d=a[c]));return d||Ze}Jp.prototype.Y=function(a){var b=a.xb();if(this.Jn[b])throw new Bb(this.Y,\"Remote object \"+b+\" already added\");return this.Jn[b]=a};Jp.prototype.Oa=function(a){delete this.Jn[a.xb()]};var Mp=\"spatials\";function Np(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback;fb(a.min)||(a.min=12);Np.g.constructor.call(this,a);if(-1===Op.indexOf(c))throw new C(Np,2,\"invalid resultType\");this.resultType=c;if(d&&!db(d))throw new C(Np,2,\"invalid style callback\");this.zi=d;this.oa=a.pixelRatio||Ke();this.Ic=z(this.Ic,this);this.Yn(new kk(b,z(this.ke,this)));this.createTileInternal=4===c||8===c?z(this.Iy,this):z(this.Gy,this)}u(Np,R);t(\"H.service.extension.TileProvider\",Np);\nNp.prototype.rq=!1;Np.prototype.getCapabilities=function(){return Np.g.getCapabilities.call(this)|di.CROP_LINES_BY_TILE|di.CROP_POLYGONS_BY_TILE};Np.prototype.Pa=function(a,b,c,d){return this.rq?Np.g.Pa.call(this,a,b,c,d):A};Np.prototype.requestTile=Np.prototype.Pa;Np.prototype.Ic=function(a){this.dispatchEvent(new Pd(\"error\",lb(a)?a:a+\"\",this))};Np.prototype.Wc=function(){return 1===this.resultType};Np.prototype.providesMarkers=Np.prototype.Wc;Np.prototype.Vc=function(){return 2===this.resultType};\nNp.prototype.providesDomMarkers=Np.prototype.Vc;Np.prototype.ne=function(){return 4===this.resultType||8===this.resultType};Np.prototype.providesSpatials=Np.prototype.ne;function Pp(a){var b=a.Bd;b||(a.cw||(a.cw=a.qu(a.resultType,a.zi,a.Ic)),b=a.Bd=new Jp(a.cw),b.ea(a),b.addEventListener(a.j.Aa,z(a.he,a)),b.vw=!0);return b}\nNp.prototype.Gy=function(a,b,c,d){var e=this.getTileKey(a,b,c);e=this.Sb().get(e);var f=2==this.resultType,g=[],h=Pp(this);e?e.valid=!0:(a=e=new Hk(a,b,c,x),delete a.Ji,a.ul=d);d=f?Lp(h,e,\"domMarkers\"):Lp(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.ys=e,(f||1===a.kc().getState())&&g.push(a);e.data=g;return e};Np.prototype.he=function(a){if(a=a.target.ys)a.valid=!1};Np.prototype.dD=function(a){this.Gw=!!a};Np.prototype.setTileCanvasRendering=Np.prototype.dD;Np.prototype.Gw=!0;\nNp.prototype.Iy=function(a,b,c,d){var e=Pp(this),f=this.getTileKey(a,b,c),g=this.tileSize,h=this.Sb().get(f);h||(a=h=new Yk(f,a,b,c,g,this.oa,c,e),delete a.Ji,a.ul=d);this.Gw?(d=lo.pop(g),h.L(d)||lo.push(d,g)):dl(h);return h};Np.prototype.ke=function(a,b){var c;if(4===this.resultType||8===this.resultType){a=b.bb();for(c=a.length;c--;)delete a[c].Fk[b.key];if(a=b.Hn())lo.push(a,this.tileSize),b.In()}else for(a=b.data,c=a.length;c--;)delete a[c].ys};\nNp.prototype.disposeInternal=function(){Np.g.disposeInternal.call(this);Pp(this).l()};var Qp={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};Np.ResultType=Qp;var Op=[1,2,4,8];function Ip(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType;Ip.g.constructor.call(this,c);B(a,Rp,Ip,0);Hp(b);e?(c=Ta(b),c.rowFilter=e.toString()):c=Ta(b);delete c.layer;c.layerId=Re(b.layerId,b.layer);(new Vm).registerProcessor(\"pde\",\"H.service.extension.worker.processor\");a=a.i().clone().A(Sp+\".\"+Tp).u({meta:1});(new Xm(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===f,serverUrl:a.toString(),layerConfigs:[c],horizontalMargin:1}]})).then(function(){d.rq=!0;d.jb()},\nthis.Ic)}u(Ip,Np);t(\"H.service.extension.platformData.TileProvider\",Ip);Ip.prototype.qu=function(a,b,c){a=new Ep(a,b,c);a.Ry=Up;return a};var Up=new M({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nIp.prototype.o=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Sb().get(g);var k={cancel:Ye},l=!0,n=this.resultType;g&&(4===n||8===n?g.Ih()||(d(lo.pop(this.tileSize),null),l=!1):(d(x),l=!1));if(l){var p=globalThis.setTimeout(function(){h=new Xm(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():globalThis.clearTimeout(p)}}return k};Ip.prototype.requestInternal=Ip.prototype.o;\nIp.prototype.disposeInternal=function(){Ip.g.disposeInternal.call(this);new Xm(\"pde\",{message:[this.uid,3]})};Ip.ResultType=Qp;function Rp(a){Rp.g.constructor.call(this,Rp,a);io(Rp)}u(Rp,oo);t(\"H.service.extension.platformData.Service\",Rp);Rp.prototype.Da=function(){return{subDomain:\"s.fleet.ls\",path:\"1\"}};Rp.CONFIG_KEY=\"platformData\";Rp.prototype.request=function(a,b,c,d,e){return this.I(a,b,c,d,e)};Rp.prototype.request=Rp.prototype.request;\nRp.prototype.I=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new C(this.request,0,a);if(!b)throw new C(this.request,1,b);if(!d)throw new C(this.request,3,d);if(!e)throw new C(this.request,4,e);a=this.i().clone().A(a+\".\"+b).u(c);b===Vp.JSON&&(f=\"application/json\");return this.o(a,d,e,f)};var Sp=\"tiles\";\nRp.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:Sp,FILE:\"file\",INDEX:\"index\"};var Tp=\"json\",Vp={TXT:\"txt\",JSON:Tp,HTML:\"html\",BIN:\"bin\"};Rp.EntryPointType=Vp;\nRp.prototype.Pd=function(a,b){var c=b&&b.resultType;a=new Ip(this,a,b);return 1==c||2===c?new Zm(a):new sl(a)};Rp.prototype.createTileLayer=Rp.prototype.Pd;Rp.prototype.Cg=function(a,b,c,d){var e=[],f,g=b.layer_id||b.layer_ids;a=this.request(a,Tp,b,function(h){f=new wp(h.geometries,c,d,function(k){return new up([],k.columnNames,k)},function(k,l){var n=k.Ud;k.Ob?k.Ob.push(l):k.Ob=[l];return n.call(k,k.Ob.length-1)},{At:g});e.push(f)},function(h){d(new globalThis.Error(h))});e.push(a);return new vp(e)};\nfunction Wp(a,b,c){if(!kb(a))throw new C(c,0,\"has invalid type\");if(!kb(b))throw new C(c,1,\"has invalid type\");if(a.length!==b.length||!a.length)throw new C(c,1,\"specify one key attribute for each given layer id in the same order\");}\nRp.prototype.se=function(a,b,c,d,e,f){function g(l,n){n&&h--;d(l,!h)}var h,k=[];Wp(a,b,this.se);rp(this.se,3,d,e);B(c,E,this.se,2);c={bbox:c.fa+\",\"+c.W+\";\"+c.ga+\",\"+c.ca};f&&Wa(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(this.Cg(\"search/bbox\",c,g,e));return new vp(k)};Rp.prototype.searchByBoundingBox=Rp.prototype.se;\nRp.prototype.Zc=function(a,b,c,d,e,f,g){Wp(a,b,this.Zc);B(c,tc,this.Zc,2,\"has invalid type\");if(!ob(d))throw new C(this.Zc,3,\"has invalid type\");rp(this.Zc,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),proximity:c.lat+\",\"+c.lng+\",\"+d};g&&Wa(a,g);return this.Cg(\"search/proximity\",a,e,f)};Rp.prototype.searchByProximity=Rp.prototype.Zc;\nRp.prototype.Yc=function(a,b,c,d,e,f,g){var h=\"\";Wp(a,b,this.Yc);if(!lb(c)&&!B(c,J))throw new C(this.Yc,1,\"has invalid type\");if(!ob(d))throw new C(this.Yc,2,\"has invalid type\");rp(this.Yc,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),radius:d};if(lb(c))a.route_id=c;else{d=c.S;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+\",\"+d[c+1],c<b-3&&(h+=\";\");a.corridor=h}g&&Wa(a,g);return this.Cg(\"search/corridor\",a,e,f)};Rp.prototype.searchByCorridor=Rp.prototype.Yc;\nX.prototype.rA=function(a){return this.Ja(Rp,a)};X.prototype.getPlatformDataService=X.prototype.rA;function Xp(a){if(a===A)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new C(Xp,0);this.$x=String(a).charCodeAt(0);this.xd=z(this.xd,this);this.s=Yp}var Yp=0;m=Xp.prototype;m.getState=function(){return this.s};function Zp(a,b,c){var d=a.s;if(d!==b)throw 1===d&&(a.s=Yp),new Bb(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}m.abort=function(){Zp(this,2,Xp.prototype.abort);this.s=Yp};\nm.xd=function(a){this.s=Yp;throw new C(Xp.prototype.parse,0,\"Malformed DSV at row \"+this.ed.Gr+\" column \"+this.ed.fj+\": \"+a);};function $p(a,b){var c=[];a.parse(b,function(d,e,f){1>d&&(c[e]=f);return 0<d});a.s=Yp;return c}m.parse=function(a,b,c){Zp(this,Yp,Xp.prototype.parse);a=a.trim();this.ed=new aq(a,this.$x,this.xd);this.ZB=b;this.Jv=c||Xe;this.s=2;this.resume()};m.Jv=Xe;\nm.resume=function(){var a=this.ed,b=[];Zp(this,2,Xp.prototype.resume);this.s=1;do{if(!a.cq){this.s=Yp;break}if(e>a.fj){if(void 0!==c&&c!==e){this.ed.xd(\"The number of columns must be the same for all rows\");return}var c=e}var d=a.Gr;var e=a.fj;var f=a.Ol;var g=this.Jv(d,e,a);if(a.Ol>f)for(;-1!==a.next(););else{for(;-1!==(f=a.next());)b.push(f);g=String.fromCharCode.apply(x,b);b.length=0}bq(a);this.ZB(d,e,g)&&(this.s=a.cq?2:Yp)}while(1===this.s);2!=this.s&&void 0!==c&&0<e&&c!==e&&this.ed.xd(\"The number of columns must be the same for all rows\")};\nfunction aq(a,b,c){this.ed=new Qa(a);this.Is=b;this.cq=!0;this.Ol=this.Gr=this.fj=0;bq(this);this.xd=c;this.Ec=[];this.Yf=!1}m=aq.prototype;m.Ol=0;function bq(a){var b=a.ed.eb();a.Yt=!1;(a.hB=34===b)&&a.ed.next()}function cq(a,b){var c=a.ed;a.Yt=!0;switch(b){case a.Is:a.fj++;break;case 13:c.next(),10!==c.eb()&&a.xd(\"CR without LF\");case 10:a.fj=0;a.Gr++;break;case -1:a.cq=!1;break;default:a.xd(\"End of field expected\")}c.next();return-1}\nm.eb=function(){if(this.Yt)var a=-1;else{var b=this.ed;a=b.eb();if(this.hB)switch(a){case 34:b.next();a=b.eb();34!==a&&(a=cq(this,a));break;case -1:this.xd(\"Closing quotation mark expected\")}else switch(a){case 34:this.xd(\"Unexpected quotation mark\");case this.Is:case 13:case 10:case -1:a=cq(this,a)}}return a};m.yi=function(){this.Yf=!0;this.Ec=[]};m.mh=function(){var a=this.Ec.slice();this.Yf=!1;this.Ec=[];return a};\nm.next=function(){var a=this.eb();-1!==a&&this.ed.next();this.Yf&&this.Ec.push(a);this.Ol++;return a};t(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});t(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function dq(){if(eq)throw new Bb(dq);}t(\"H.service.extension.customLocation.Table\",dq);var eq=!0;function fq(a,b){var c;eq=!1;var d=new dq;eq=!0;d.Ym=bb(globalThis.JSON.parse(globalThis.JSON.stringify(a)));a=a.columnNames;var e=Za();for(c=a.length;c--;)e[a[c]]=c;d.So=e;d.Hc=a.length;if(b){if(b.length%a.length)throw new C(fq,1,\"Invalid number of cells\");}else b=[];d.tb=b;return d}dq.prototype.zh=function(){return this.Ym};dq.prototype.getMeta=dq.prototype.zh;\ndq.prototype.Ch=function(){return this.tb.length/this.Hc};dq.prototype.getRowCount=dq.prototype.Ch;dq.prototype.Ud=function(a){return a<this.tb.length/this.Hc?new gq(this,a):A};dq.prototype.getRow=dq.prototype.Ud;dq.prototype.CA=function(){var a=this.tb.length/this.Hc,b,c=new globalThis.Array(a);for(b=0;b<a;b++)c[b]=new gq(this,b);return c};dq.prototype.getRows=dq.prototype.CA;\ndq.prototype.zo=function(a){var b=this.Hc,c=this.tb,d=c.length/this.Hc;if(!a||a.length%b)throw new C(this.zo,0,\"Invalid number of cells\");this.tb=c.concat(a);return d};dq.prototype.addCells=dq.prototype.zo;dq.prototype.ly=function(){for(var a=this.Hc,b=this.tb,c=this.tb.length/this.Hc;a--;)b.push(x);return this.Ud(c)};dq.prototype.addRow=dq.prototype.ly;dq.prototype.ab=function(){return this.Ym.columnNames};dq.prototype.getColumnNames=dq.prototype.ab;\ndq.prototype.Fj=function(a){return this.So[a]===A?A:new hq(this,a)};dq.prototype.getColumn=dq.prototype.Fj;dq.prototype.va=function(a,b){return this.tb[a*this.Hc+this.So[b]]};dq.prototype.getCell=dq.prototype.va;dq.prototype.ue=function(a,b,c){b=this.So[b];if(a>=this.tb.length/this.Hc)throw new C(this.ue,0,\"Row index out of bounds\");if(b===A)throw new C(this.ue,0,\"Column unknown\");this.tb[a*this.Hc+b]=c};dq.prototype.setCell=dq.prototype.ue;\ndq.prototype.concat=function(a){var b=arguments.length,c,d=\"\"+this.ab(),e=this.tb?this.tb.slice():[];for(c=0;c<b;c++){var f=arguments[c];if(!(f instanceof dq))throw new C(this.concat,c);if(\"\"+f.ab()!==d)throw new C(this.concat,c,\"Incompatible columns!\");f.tb&&(e=e.concat(f.tb))}return fq(this.Ym,e)};dq.prototype.concat=dq.prototype.concat;var iq=/(\\n|\\t|\\r|\")/;\ndq.prototype.os=function(a,b){var c,d=this.Hc,e=this.ab(),f=[],g=[],h=this.tb,k=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(k=f.length),f.push(c);if(!(a=f.length))throw new C(this.os,1,\"No columns filtered\");jq(this,g,e,0,d,f,a,k);if(b){var l=b.length;for(c=0;c<l;c++)g.push(\"\\n\"),e=b[c],jq(this,g,h,e,d,f,a,k)}else for(l=this.Ch(),e=0;e<l;e++)g.push(\"\\n\"),jq(this,g,h,e,d,f,a,k);return g.join(\"\")};\nfunction jq(a,b,c,d,e,f,g,h){var k;for(k=0;k<g;k++){k&&b.push(\"\\t\");var l=c[d*e+f[k]];if(k!==h){if(l!==x){l=String(l);if(iq.test(l))throw new C(a.os,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.Ym.columnNames[f[k]]);b.push(l)}}else b.push(l)}}function hq(a,b){this.$b=a;this.Nl=b}dq.Column=hq;hq.prototype.va=function(a){return this.$b.va(a,this.Nl)};hq.prototype.getCell=hq.prototype.va;hq.prototype.ue=function(a,b){this.$b.ue(a,this.Nl,b)};hq.prototype.setCell=hq.prototype.ue;\nfunction gq(a,b){this.$b=a;this.Kk=b}dq.Row=gq;gq.prototype.ab=function(){return this.$b.ab()};gq.prototype.getColumnNames=gq.prototype.ab;gq.prototype.va=function(a){return this.$b.va(this.Kk,a)};gq.prototype.getCell=gq.prototype.va;gq.prototype.ue=function(a,b){this.$b.ue(this.Kk,a,b)};gq.prototype.setCell=gq.prototype.ue;gq.prototype.Rf=function(){return this.$b};gq.prototype.getTable=gq.prototype.Rf;function kq(a,b,c,d){d=d||{};if(!b)throw new C(kq,1,\"has to be a function\");if(!c)throw new C(kq,2,\"has to be a function\");this.mn=b;this.dn=c;this.bh=[];this.pc={};this.xq=[];this.lh={};this.fs={};this.ls={};this.nx={};this.rj=d.duration||100;this.Gm=z(this.Gm,this);a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++){d=a[b].split(\"\\n\");c=d[0].split(\"\\t\")[0];d=d.slice(1).join(\"\\n\");this.lh[c]=new Xp;this.pc[c]=$p(this.lh[c],d);var e={layerId:c,columnNames:this.pc[c]};this.xq.push(c);this.nx[c]=\nfq(e);this.fs[c]=rk();lq(this,d,c);this.Gm(c)}}function lq(a,b,c){var d=[],e=a.pc[c].length-1,f=a.nx[c];try{a.lh[c].parse(b,function(g,h,k){var l=!1;0<g&&(d[h]=k,h===e&&(a.bh.push(f.Ud(f.zo(d))),rk()-a.fs[c]>a.rj&&(l=!0)));return l},function(g,h,k){if(0<g&&h===e)return Pf(k)})}catch(g){a.dn(g)}}kq.prototype.cancel=function(){for(var a in this.ls)globalThis.clearTimeout(this.ls[a])};kq.prototype.cancel=kq.prototype.cancel;\nkq.prototype.Gm=function(a){var b=this,c,d;this.ls[a]=globalThis.setTimeout(function(){if(2===b.lh[a].getState())b.fs[a]=rk(),b.mn(b.bh,!1),b.bh=[],b.lh[a].resume(),b.Gm(a);else{c=!0;for(d=0;d<b.xq.length;d++)if(b.lh[b.xq[d]].getState()!==Yp){c=!1;break}c&&(0<b.bh.length&&b.mn(b.bh,!0),b.bh=[])}},0)};function mq(a){var b=nq;if(!a||!lb(a.layerId)||fb(a.rowFilter)&&!db(a.rowFilter)||fb(a.rowFilterContext)&&!ya(a.rowFilterContext))throw new C(b,1,fb(\"invalid layer config\")?\"invalid layer config\":a);}function oq(a){return lb(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function pq(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=oq(a[b]);return c}\nfunction qq(a,b){var c=\"\",d=[];if(b){var e=a.geometries;if(e&&e.length){var f=Object.keys(e[0].attributes);c=c+(\"Meta:\\t\"+b+\"\\n\")+f.join(\"\\t\");c+=\"\\tWKT\\n\";for(a=0;a<e.length;a++){var g=e[a].attributes;var h=e[a].geometry;for(b=0;b<f.length;b++)d.push(g[f[b]]);c+=d.join(\"\\t\");c+=\"\\t\"+h+\"\\n\";d=[]}}}else{h={};d=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)b=a.geometries[e],h[b.layerId]||(h[b.layerId]=[]),h[b.layerId].push(b);for(f in h)d.push({layerId:f,geometries:h[f]});for(a=0;a<d.length;a++)c+=\nqq(d[a],d[a].layerId)}return c};function nq(a,b,c){var d=this,e=b&&b.rowFilter,f;nq.g.constructor.call(this,c);B(a,rq,nq,0);var g=c.resultType;mq(b);if(e){var h=Ta(b);h.rowFilter=e.toString()}else h=b;(new Vm).registerProcessor(\"cle\",\"H.service.extension.worker.processor\");var k=b.layerId;a.request(sq,tq,{detail_level:\"all\",layer_id:k},function(l){l=l.layers;var n;for(n=0;n<l.length;n++)if(l[n].layerId===k){h.level=l[n].level;break}f=a.i().clone().A(uq+\".\"+tq).u({meta:1});(new Xm(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,\nprojected:!0,onlyOutline:4===g,serverUrl:f.toString(),layerConfigs:[h],batchTiles:!1,horizontalMargin:1}]})).then(function(){d.rq=!0;d.jb()},d.Ic)},function(l){d.Ic(l.message)})}u(nq,Np);t(\"H.service.extension.customLocation.TileProvider\",nq);nq.prototype.qu=function(a,b,c){return new Ep(a,b,c)};\nnq.prototype.o=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Sb().get(g);var k={cancel:Ye},l=!0,n=this.resultType;g&&(4===n||8===n?g.Ih()||(d(lo.pop(this.tileSize),null),l=!1):(d(x),l=!1));if(l){var p=globalThis.setTimeout(function(){h=new Xm(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():globalThis.clearTimeout(p)}}return k};nq.prototype.requestInternal=nq.prototype.o;\nnq.prototype.disposeInternal=function(){nq.g.disposeInternal.call(this);new Xm(\"cle\",{message:[this.uid,3]})};function rq(a){rq.g.constructor.call(this,rq,a);io(rq)}u(rq,oo);t(\"H.service.extension.customLocation.Service\",rq);rq.prototype.Da=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};rq.CONFIG_KEY=\"customLocation\";rq.prototype.Pd=function(a,b){var c=b&&b.resultType;a=new nq(this,a,b);return 1===c||2===c?new Zm(a):new sl(a)};rq.prototype.createTileLayer=rq.prototype.Pd;\nfunction vq(a,b,c,d){a=a===wq?\"changes\":\"file\";var e=b[a];var f=lb(e),g=!f&&B(e,Blob);if(!f&&!g)throw new C(d,0,\"Invalid \"+a+\" parameter\");if(xq)e=g?e:ff(e,\"text/plain\"),d=new globalThis.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(g)throw new C(d,0,\"Sending Blob data is not supported by the browser\");}var xq=globalThis.FormData&&!!globalThis.FormData.prototype.append;rq.prototype.request=function(a,b,c,d,e){return this.I(a,b,c,d,e)};rq.prototype.request=rq.prototype.request;\nrq.prototype.I=function(a,b,c,d,e){var f=\"text/plain\",g=a===yq.LAYERS_UPLOAD||a===yq.LAYERS_MODIFY||a===yq.LAYERS_IMPORT,h=c,k={data:A,method:\"GET\",headers:this.pc};if(!a)throw new C(this.request,0,a);if(!b)throw new C(this.request,1,b);rp(this.request,3,d,e);g&&(B(c,Object,this.request,2,\"Invalid request parameters\"),h=Ta(c),vq(a,h,k,this.request));var l=this.i().clone().A(a+\".\"+b).u(h);b===zq.JSON&&(f=\"application/json\");a=new qg(f,l.toString(),De,k);a.then(function(n){var p=n.issues;p&&n.error_id&&\nn.response_code?e(Error(p[0].message)):d(n)},function(n){\"error\"===n.type||404===n.status?e(Error(n.statusText||\"Unable to load data\")):n.json().then(function(p){e(Error(\"[\"+p.issues[0].message+\"] \"+l+\" request failed\"))},function(){e(Error(\"[\"+n.statusText+\"] \"+l+\" request failed\"))})});return a};\nvar sq=\"layers/list\",wq=\"layers/modify\",uq=\"tiled/tile\",yq={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:sq,LAYERS_MODIFY:wq,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:uq};rq.EntryPoint=yq;var tq=\"json\",zq={TXT:\"txt\",JSON:tq};rq.EntryPointType=zq;\nrq.prototype.Tb=function(a,b,c){var d=this;return this.request(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=String(e).replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.request(sq,tq,{layer_id:a,detail_level:\"all\"},function(g){g=g.layers[0];g.columnNames=f;b(fq(g))},c)},c)};rq.prototype.getLayer=rq.prototype.Tb;\nrq.prototype.Au=function(a,b,c,d){function e(){return++g<f?h.request(\"layers/access/grant\",tq,{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.Tb(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};rq.prototype.grantAccess=rq.prototype.Au;rq.prototype.Dt=function(a,b,c){return this.request(\"layers/delete\",tq,{layer_ids:a},b,c)};rq.prototype.deleteLayer=rq.prototype.Dt;\nrq.prototype.od=function(a,b,c){function d(){setTimeout(function(){k.Tb(g,function(q){setTimeout(e.bind(null,q),n)},function(){64E3>l?(l+=n,d()):c(globalThis.Error(\"Timeout\"))})},n);n*=2}function e(q){var r=JSON.stringify(q.ab()),v=a.grants;if(r!==JSON.stringify(h)){var w=\"Results into different column names on the backend: \"+r;setTimeout(function(){k.Dt(g,function(){c(globalThis.Error(w))},function(y){c(globalThis.Error(w+\". \"+y.message))})},n)}else v&&v.length?k.Au(g,v,b,c):b(q)}var f,g,h,k=this,\nl=0,n=1E3;var p=!a||!oq(g=a.layerId)&&(f=\"layerId\")||!pq(h=a.columnNames)&&(f=\"columnNames\")?0:db(b)?db(c)?-1:2:1;if(0<=p)throw new C(k.od,p,f||arguments[p]);return k.Tb(g,function(){c(globalThis.Error(\"Layer exists already\"))},function(){var q={layer_id:g,file:h.join(\"\\t\")},r=a.level,v=a.storage;r!==A&&(q.level=r);v!==A&&(q.storage=v);k.request(\"layers/upload\",tq,q,d,c)})};rq.prototype.createLayer=rq.prototype.od;\nrq.prototype.Cg=function(a,b,c,d){var e=[],f;a=this.request(a,tq,b,function(g){g.geometries.length?(g=qq(g,b.layer_id),f=new kq(g,c,d),e.push(f)):c(Ze,!0)},d);e.push(a);return new vp(e)};rq.prototype.Zc=function(a,b,c,d,e,f){if(!kb(a))throw new C(this.Zc,0,\"has invalid type\");B(b,tc,this.Zc,1,\"has invalid type\");if(!ob(c))throw new C(this.Zc,2,\"has invalid type\");rp(this.Zc,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Wa(a,f);return this.Cg(\"search/proximity\",a,d,e)};\nrq.prototype.searchByProximity=rq.prototype.Zc;rq.prototype.Yc=function(a,b,c,d,e,f){var g=\"\";if(!kb(a))throw new C(this.Yc,0,\"has invalid type\");if(!lb(b)&&!B(b,J))throw new C(this.Yc,1,\"has invalid type\");if(!ob(c))throw new C(this.Yc,2,\"has invalid type\");rp(this.Yc,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(lb(b))a.route_id=b;else{var h=b.S;b=0;for(c=h.length;b<c;b+=3)g+=h[b]+\",\"+h[b+1],b<c-3&&(g+=\",\");a.corridor=g}f&&Wa(a,f);return this.Cg(\"search/corridor\",a,d,e)};\nrq.prototype.searchByCorridor=rq.prototype.Yc;rq.prototype.se=function(a,b,c,d,e){function f(k,l){l&&h--;c(k,!h)}var g=[],h;if(!kb(a))throw new C(this.se,0,\"has invalid type\");B(b,E,this.se,1,\"has invalid type\");rp(this.se,2,c,d);b={bbox:b.fa+\",\"+b.W+\";\"+b.ga+\",\"+b.ca};e&&Wa(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(this.Cg(\"search/bbox\",b,f,d));return new vp(g)};rq.prototype.searchByBoundingBox=rq.prototype.se;\nrq.prototype.Lr=function(a,b,c,d){var e,f=[];if(!lb(a))throw new C(this.Lr,0,\"has invalid type\");rp(this.Lr,1,b,c);var g={layer_id:a};d&&Wa(g,d);d=this.request(\"search/all\",tq,g,function(h){h.geometries.length?(h=qq(h,a),e=new kq(h,b,c),f.push(e)):b(Ze,!0)},c);f.push(d);return new vp(f)};rq.prototype.searchAll=rq.prototype.Lr;var Aq={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};\nfunction Bq(a,b,c,d,e,f){function g(){v++;d(this,v===q)}function h(O){v++;e(O,this,v===q)}var k=\"append\"!==b,l,n={},p=Za(),q=0,r=[],v=0;if(!kb(c))throw new C(f,0,c);rp(f,1,d,e);for(l=c.length;l--;){var w=c[l];if(B(w,gq)){var y=w.Rf().zh().layerId;var F=w.va(\"GEOMETRY_ID\");if(k){if(F===x||\"\"===String(F))var G='GEOMETRY_ID must not be null or \"\"';n[F=y+\"_\"+F]&&(G=\"same GEOMETRY_ID for multiple rows\");n[F]=w}else F!==x&&\"\"!==String(F)&&(G='GEOMETRY_ID must be null or \"\"')}else G=\"Invalid type\";if(G)throw new C(f,\n0,\"- Invalid row at index \"+l+\", \"+G);F=p[y];F||(F=p[y]=[],q++);F.push(w)}for(y in p){F=p[y];c=[];for(l=F.length;l--;)c.push(F[l].Kk);r.push(a.request(wq,tq,{layer_id:y,action:b,changes:F[0].Rf().os(Aq[b]||null,c)},z(g,F),z(h,F)))}return new vp(r)}rq.prototype.dt=function(a,b,c){return Bq(this,\"append\",a,b,c,this.dt)};rq.prototype.appendRows=rq.prototype.dt;rq.prototype.Hx=function(a,b,c){return Bq(this,\"update\",a,b,c,this.Hx)};rq.prototype.updateRows=rq.prototype.Hx;\nrq.prototype.Et=function(a,b,c){return Bq(this,\"delete\",a,b,c,this.Et)};rq.prototype.deleteRows=rq.prototype.Et;X.prototype.Hz=function(a){return this.Ja(rq,a)};X.prototype.getCustomLocationService=X.prototype.Hz;function Cq(a){np.g.constructor.call(this,Cq,a);io(Cq)}u(Cq,oo);t(\"H.service.extension.customRoute.Service\",Cq);Cq.prototype.Da=function(){return{subDomain:\"s.fleet.ls\",path:\"2\"}};Cq.CONFIG_KEY=\"customRoute\";Cq.prototype.Jc=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a)};Cq.prototype.Xg=function(a,b,c){rp(this.Xg,1,b,c);a=this.i().clone().A(\"calculateroute.json\").u(a);return this.o(a,b,c)};Cq.prototype.calculateRoute=Cq.prototype.Xg;\nX.prototype.Iz=function(a){return this.Ja(Cq,a)};X.prototype.getCustomRoutingService=X.prototype.Iz;function Dq(a){Dq.g.constructor.call(this,Dq,a);this.uu=a.getToken}u(Dq,oo);t(\"H.service.iml.Service\",Dq);Dq.prototype.Da=function(){return{host:\"interactive.data.api.platform.here.com\",path:\"interactive/v1/catalogs\"}};\nDq.prototype.Jc=function(a){function b(){for(var d=fa(c),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.format;if(e.keys.every(function(g){return a[g]}))return f()}return JSON.stringify(a)}var c=[{keys:[\"code\",\"title\",\"cause\",\"action\"],format:function(){return a.code+\": \"+a.title+\"; cause: \"+a.cause+\"; action: \"+a.action}},{keys:[\"error\",\"error_description\"],format:function(){return a.error+\": \"+a.error_description}},{keys:[\"error\",\"errorMessage\"],format:function(){return a.error+\": \"+a.errorMessage}}];\nreturn Error(ya(a)?b():a)};Dq.prototype.Dh=function(a,b,c,d,e){var f=this.Dh;Eq(f,0,a,b);Fq(f,2,c,d);a=this.i().clone().A(a+\"/layers/\"+b+\"/statistics\").u(e||{});return this.I(a,\"GET\",c,d)};Dq.prototype.getStatistics=Dq.prototype.Dh;Dq.prototype.lm=function(a,b,c,d,e,f,g,h,k){var l=k?\"\":\".mvtf\";a=this.i().clone().A(d+\"/layers/\"+e+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+l).u(Object.assign({clip:!0},h));return this.I(a,\"GET\",k?f:function(n){return n.arrayBuffer().then(f)},g,void 0,k?\"application/json\":\"arraybuffer\")};\nDq.prototype.getFeaturesByTile=Dq.prototype.lm;Dq.prototype.hu=function(a,b,c,d,e,f){var g=this.hu;Gq(g,a);Eq(g,1,b,c);Fq(g,3,d,e);a=Hq(this,a,b,c,f);return this.I(a,\"GET\",d,e)};Dq.prototype.getFeatureById=Dq.prototype.hu;Dq.prototype.Ue=function(a,b,c,d,e,f){var g=this.Ue;Iq(g,a);Eq(g,1,b,c);Fq(g,3,d,e);a=Jq(this,a,b,c,f);return this.I(a,\"GET\",d,e)};Dq.prototype.getFeaturesById=Dq.prototype.Ue;\nDq.prototype.wh=function(a,b,c,d,e){var f=this.wh;if(!ya(a)||!(a.bbox||a.north&&a.east&&a.south&&a.west))throw new C(f,0,'must be an object with either \"bbox\" or a full set of \"north\", \"east\", \"south\" and \"west\"');Eq(f,1,b,c);Fq(f,3,d,e);a=this.i().clone().A(b+\"/layers/\"+c+\"/bbox\").u(a);return this.I(a,\"GET\",d,e)};Dq.prototype.getFeaturesByBoundingBox=Dq.prototype.wh;\nDq.prototype.ju=function(a,b,c,d,e){var f=this.ju;if(!(ya(a)&&a.radius&&(a.lat&&(a.lng||a.lon)||a.refCatalogHrn&&a.refLayerId&&a.refFeatureId)))throw new C(f,0,'must be an object with \"radius\" and a combination of either \"lat\"+\"lng\" or \"refCatalogHrn\"+\"refLayerId\"+\"refFeatureId\"');Eq(f,1,b,c);Fq(f,3,d,e);a=this.i().clone().A(b+\"/layers/\"+c+\"/spatial\").u(a);return this.I(a,\"GET\",d,e)};Dq.prototype.getFeaturesByPointAndRadius=Dq.prototype.ju;\nDq.prototype.iu=function(a,b,c,d,e,f){var g=this.iu;if(!ya(a)||!a.radius)throw new C(g,0,'must be an object with \"radius\"');Kq(g,1,b);Eq(g,2,c,d);Fq(g,4,e,f);a=this.i().clone().A(c+\"/layers/\"+d+\"/spatial\").u(a);return this.I(a,\"POST\",e,f,b)};Dq.prototype.getFeaturesByGeometryAndRadius=Dq.prototype.iu;Dq.prototype.Nw=function(a,b,c,d,e){var f=this.Nw;Eq(f,0,a,b);Fq(f,2,c,d);a=this.i().clone().A(a+\"/layers/\"+b+\"/search\").u(e||{});return this.I(a,\"GET\",c,d)};Dq.prototype.searchFeatures=Dq.prototype.Nw;\nDq.prototype.av=function(a,b,c,d,e){var f=this.av;Eq(f,0,a,b);Fq(f,2,c,d);a=this.i().clone().A(a+\"/layers/\"+b+\"/iterate\").u(e||{});return this.I(a,\"GET\",c,d)};Dq.prototype.iterateFeatures=Dq.prototype.av;Dq.prototype.nf=function(a,b,c,d,e,f){var g=this.nf;Kq(g,0,a);Eq(g,1,b,c);Fq(g,3,d,e);b=Lq(this,b,c,f);return this.I(b,\"PUT\",d,e,a)};Dq.prototype.putFeatures=Dq.prototype.nf;\nDq.prototype.lf=function(a,b,c,d,e,f){var g=this.lf;Kq(g,0,a);Eq(g,1,b,c);Fq(g,3,d,e);b=Lq(this,b,c,f);return this.I(b,\"POST\",d,e,a)};Dq.prototype.postFeatures=Dq.prototype.lf;Dq.prototype.If=function(a,b,c,d,e){var f=this.If;Iq(f,a);Eq(f,1,b,c);Fq(f,3,d,e);a=Jq(this,a,b,c);return this.I(a,\"DELETE\",d,e)};Dq.prototype.deleteFeatures=Dq.prototype.If;Dq.prototype.xw=function(a,b,c,d,e,f,g){var h=this.xw;Gq(h,a);Kq(h,1,b);Eq(h,2,c,d);Fq(h,4,e,f);a=Hq(this,a,c,d,g);return this.I(a,\"PUT\",e,f,b)};\nDq.prototype.putFeature=Dq.prototype.xw;Dq.prototype.dw=function(a,b,c,d,e,f,g){var h=this.dw;Gq(h,a);Kq(h,1,b);Eq(h,2,c,d);Fq(h,4,e,f);a=Hq(this,a,c,d,g);return this.I(a,\"PATCH\",e,f,b)};Dq.prototype.patchFeature=Dq.prototype.dw;Dq.prototype.Ct=function(a,b,c,d,e){var f=this.Ct;Gq(f,a);Eq(f,1,b,c);Fq(f,3,d,e);a=Hq(this,a,b,c);return this.I(a,\"DELETE\",d,e,void 0,\"text/plain\")};Dq.prototype.deleteFeature=Dq.prototype.Ct;\nfunction Lq(a,b,c,d){return a.i().clone().A(b+\"/layers/\"+c+\"/features\").u(d||{})}function Jq(a,b,c,d,e){b=Object.assign({},e,{id:new zo(b)});return Lq(a,c,d,b)}function Hq(a,b,c,d,e){return a.i().clone().A(c+\"/layers/\"+d+\"/features/\"+b).u(e||{})}\nDq.prototype.I=function(a,b,c,d,e,f){f=void 0===f?\"application/json\":f;b={method:b,headers:Object.assign({},e?{\"Content-Type\":\"application/geo+json\"}:void 0,\"function\"===typeof this.uu?{Authorization:\"Bearer \"+this.uu()}:void 0,this.pc)};e&&(b.data=JSON.stringify(e));e=new qg(f,a.toString(),De,b);e.then(c,ro(this,a,d));return e};Dq.CONFIG_KEY=\"iml\";function Eq(a,b,c,d){ib(c,\"String\",a,b,\"must be a string\");ib(d,\"String\",a,b+1,\"must be a string\")}\nfunction Gq(a,b){ib(b,\"String\",a,0,\"must be a string\")}function Iq(a,b){if(!Array.isArray(b)||0===b.length||b.some(function(c){return\"string\"!==typeof c}))throw new C(a,0,\"must be a non-empty array of strings\");}function Kq(a,b,c){if(!ya(c))throw new C(a,b,\"must be a GeoJSON object\");}function Fq(a,b,c,d){if(!db(c))throw new C(a,b,\"must be a function\");if(!db(d))throw new C(a,b+1,\"must be a function\");}X.prototype.Xz=function(a){return this.Ja(Dq,a)};X.prototype.getIMLService=X.prototype.Xz;function Mq(a,b,c,d){Mq.g.constructor.call(this,d?{min:d.min,max:d.max,engineType:d.engineType}:void 0);B(a,Dq,Mq,0);if(!lb(b))throw new C(Mq,1,'\"catalogHrn\" must be a string');if(!lb(c))throw new C(Mq,2,'\"layerId\" must be a string');this.$=a;this.$g=b;this.Mh=c;this.Ok=ya(d)&&ya(d.parameters)?d.parameters:{};this.Xa(this.Ep())}u(Mq,R);t(\"H.service.iml.Provider\",Mq);Mq.prototype.o=function(a,b,c,d,e){return this.$.lm(a,b,c,this.$g,this.Mh,d,e,this.Ok)};Mq.prototype.requestInternal=Mq.prototype.o;\nMq.prototype.Xc=We;Mq.prototype.providesOMV=Mq.prototype.Xc;Mq.prototype.K=function(){return this.mb()};Mq.prototype.getStyle=Mq.prototype.K;Mq.prototype.Cb=function(a){B(a,Xg)&&a.Yb(\"MVT\");this.Xa(a)};Mq.prototype.setStyle=Mq.prototype.Cb;\nMq.prototype.Ep=function(){return this.vb===mi.WEBGL?new Xg({sources:{iml:{type:\"MVT\"}},layers:{iml:{data:{source:\"iml\",layer:this.$g+\":\"+this.Mh},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",size:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#0258AE\",width:\"2px\",join:\"round\",\ncap:\"round\"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.$g+\":\"+this.Mh,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,8,14,12,18,16]},{layer:this.$g+\":\"+this.Mh,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"polygon\",color:\"#E39E3C\",renderOrder:201},{layer:this.$g+\":\"+this.Mh,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",width:\"1px\",renderOrder:202},{layer:this.$g+\n\":\"+this.Mh,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",color:\"#0258AE\",width:\"2px\",renderOrder:203}]})};function Nq(a,b,c){var d=this,e=c||{},f=+e.min,g=+e.max;e.tileSize=e.tileSize||512;e.min=f?gc(f,1,17):1;e.min+=Gk(e.tileSize,1);e.max=g?gc(g,1,17):17;Nq.g.constructor.call(this,e);B(a,Oq,Nq,0);B(b,zg,Nq,1);this.$=a;b.Yb&&b.Yb(\"OMV\");this.Xa(b,!0);this.xn=!1;c&&(c.politicalView&&(this.yn=c.politicalView),Pq(this,c.lg,c.lg2),this.xn=!!c.pois);this.zw=function(){d.Hl=go(d);d.reload(!1)};a.addEventListener(\"versionupdate\",this.zw);this.Hl=go(this);Nq.prototype.Xo=function(){var h=/^v2\\/vectortiles\\/(.+)\\/mc$/.exec(a.i().jf);\nreturn h?h[1]:A+\"\"}()}u(Nq,R);t(\"H.service.omv.Provider\",Nq);Nq.prototype.Xc=We;Nq.prototype.providesOMV=Nq.prototype.Xc;Nq.prototype.cc=function(a){return this.Hl.test(a)};Nq.prototype.cacheFilter=Nq.prototype.cc;Nq.prototype.Vd=function(a,b,c){return this.$.Sf(a,b,c).toString()};Nq.prototype.getTileKey=Nq.prototype.Vd;Nq.prototype.Sb=function(){return this.TB};Nq.prototype.getCache=Nq.prototype.Sb;Nq.prototype.tA=function(){return this.yn};Nq.prototype.getPoliticalView=Nq.prototype.tA;\nNq.prototype.bD=function(a){var b=this.yn;this.yn=a;this.dispatchEvent(new ji(\"politicalviewchange\",this.yn,b))};Nq.prototype.setPoliticalView=Nq.prototype.bD;Nq.prototype.MAX_STORE_TIME=2592E6;Nq.prototype.Vi=function(){return pm()};Nq.prototype.td=function(){return pm()?om():Nq.g.td.call(this)};Nq.prototype.o=function(a,b,c,d,e){return this.$.Pa(a,b,c,d,e)};Nq.prototype.requestInternal=Nq.prototype.o;Nq.prototype.Cb=function(a){a.Yb&&a.Yb(\"OMV\");this.Xa(a)};Nq.prototype.setStyle=Nq.prototype.Cb;\nNq.prototype.K=function(){return Nq.g.mb.apply(this)};Nq.prototype.getStyle=Nq.prototype.K;Nq.prototype.mb=function(){var a=Nq.g.mb.apply(this),b=a.getState()===Ag.READY,c=a.Sd();b&&c&&c.global&&(this.pq&&(this.ow&&(c.global.ux_language=this.ow),this.Wt&&(c.global.ux_language_fallback=this.Wt)),this.xn&&c.global.poi&&c.global.poi[\"default\"]&&(c.global.poi[\"default\"].visible=this.xn),this.pq||this.xn)&&(a=new Xg(c,a.Lc()));return a};Nq.prototype.getStyleInternal=Nq.prototype.mb;\nfunction Pq(a,b,c){var d=lb(b),e=lb(c);d&&(a.ow=b);e&&(a.Wt=c);if(d||e)a.Zj=[],d=/^([a-zA-Z]{2})(-|$)/,(e=d.exec(b))&&(\"zh\"===e[1]?a.Zj.push(b):a.Zj.push(e[1])),(e=d.exec(c))&&(\"zh\"===e[1]?a.Zj.push(c):a.Zj.push(e[1])),a.pq=!0}Nq.prototype.pq=!1;var Qq=[\"en\"];Nq.prototype.Ip=function(){return this.Zj||Qq};Nq.prototype.getLanguages=Nq.prototype.Ip;Nq.prototype.disposeInternal=function(){Nq.g.disposeInternal.call(this);this.$.removeEventListener(\"versionupdate\",this.zw)};Nq.prototype.TB=new kk(256);\nNq.prototype.U=function(a,b){return this.$.U().query(this.Xo,b,a)};Nq.prototype.getCopyrights=Nq.prototype.U;function Oq(a){Oq.g.constructor.call(this,Oq,a);var b=po(this,a).mapVersion;this.Fn=a.queryParams||{};this.dk=fb(b)?b:Rq[this.i().toString()];fb(this.dk)||Sq(this)}u(Oq,oo);t(\"H.service.omv.Service\",Oq);Oq.prototype.Da=function(){return{subDomain:\"vector\",path:\"v2/vectortiles/base/mc\"}};Oq.CONFIG_KEY=\"omv\";var Rq={};rb(Rq);Oq.prototype.hA=function(){return this.dk};Oq.prototype.getMapVersion=Oq.prototype.hA;\nfunction Sq(a){a.o(a.i().clone().A(\"../../info\"),function(b){b=b.mapVersion;var c=a.i().toString();a.dk=b;b!==Rq[c]&&(Rq[c]=b,a.dispatchEvent(\"versionupdate\"))},function(){})}Oq.prototype.od=function(a,b,c){b=b||{};var d={min:0,max:22};ya(c)&&ho(d,c);return new sl(new Nq(this,a,b),d)};Oq.prototype.createLayer=Oq.prototype.od;Oq.prototype.Pa=function(a,b,c,d,e){return this.o(this.Sf(a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,\"arraybuffer\")};\nOq.prototype.Sf=function(a,b,c){a=this.i().clone().A(c+\"/\"+a+\"/\"+b+\"/omv\");fb(this.dk)&&a.u({mv:this.dk}).u(this.Fn);return a};Oq.prototype.rm=function(a){return kn()+\"/\"+a};Oq.prototype.Nj=function(a,b){if(!db(a))throw new C(this.Nj,0,'\"onResult\" must be a function');if(!db(b))throw new C(this.Nj,1,'\"onError\" must be a function');return this.o(this.i().clone().wc(\"v2/vectortiles/pviews\"),a,b)};Oq.prototype.getPoliticalViews=Oq.prototype.Nj;X.prototype.Lj=function(a){return this.Ja(Oq,a)};\nX.prototype.getOMVService=X.prototype.Lj;Oq.prototype.Kf=function(){this.ec=new to;this.o(this.i().clone().A(\"../../copyrights\"),z(this.pl,this),Ye)};Oq.prototype.pl=function(a){uo(this.ec,a);this.dispatchEvent(\"copyrightupdate\")};Oq.prototype.U=function(){this.ec||this.Kf();return this.ec};Oq.prototype.getCopyrights=Oq.prototype.U;function Tq(a){Tq.g.constructor.call(this,Tq,a)}u(Tq,oo);t(\"H.service.RoutingService8\",Tq);Tq.CONFIG_KEY=\"routing_v8\";Tq.prototype.Da=function(){return{subDomain:\"router\",path:\"v8/routes\"}};Tq.prototype.Jc=function(a){return Error(401===(a&&void 0===a.status?401:a.status)?a.error_description:a.title,{cause:a})};Tq.prototype.Xg=function(a,b,c){a=this.i().clone().u(a);return this.o(a,b,c)};Tq.prototype.calculateRoute=Tq.prototype.Xg;\nTq.prototype.Mo=function(a,b,c){a=this.i().clone().la(\"isoline\").wc(\"v8/isolines\").u(a);return this.o(a,b,c)};Tq.prototype.calculateIsoline=Tq.prototype.Mo;function Uq(a){Uq.g.constructor.call(this,Uq,a);io(Uq,\"Use HERE Routing API v8 instead.\")}u(Uq,oo);t(\"H.service.RoutingService\",Uq);Uq.prototype.Da=function(){return{subDomain:\"route.ls\",path:\"routing/7.2\"}};Uq.prototype.Jc=function(a){return Error(a.details)};Uq.CONFIG_KEY=\"routing\";Uq.prototype.Xg=function(a,b,c){a=this.i().clone().A(\"calculateroute.json\").u(a);return this.o(a,b,c)};Uq.prototype.calculateRoute=Uq.prototype.Xg;\nUq.prototype.Mo=function(a,b,c){a=this.i().clone().la(\"isoline\").A(\"calculateisoline.json\").u(a);return this.o(a,b,c)};Uq.prototype.calculateIsoline=Uq.prototype.Mo;X.prototype.su=function(a,b){b=+b||7;if(7===b)b=Uq;else if(8===b)b=Tq;else throw new C(this.su,1,\"allowed values are 7 and 8\");return this.Ja(b,a)};X.prototype.getRoutingService=X.prototype.su;t(\"H.service.buildInfo\",function(){return Wh(\"H-service\",\"1.61.0\",\"3b08619\",{region:\"row\"})});\n");